{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport React from 'react';\n\nfunction hasProps(child) {\n  if (!child || typeof child !== 'object' || !('props' in child)) {\n    return false;\n  }\n\n  return true;\n}\n\nvar ToolbarSelect = function (_super) {\n  __extends(ToolbarSelect, _super);\n\n  function ToolbarSelect(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this._node = null;\n    _this._listener = null;\n\n    _this.handleOpen = function (e) {\n      preventDefault(e);\n\n      _this.setState({\n        visible: true\n      });\n\n      _this._subscribe();\n    };\n\n    _this.state = {\n      visible: false\n    };\n    return _this;\n  }\n\n  ToolbarSelect.prototype.componentWillUnmount = function () {\n    this._release();\n  };\n\n  ToolbarSelect.prototype.render = function () {\n    var _this = this;\n\n    var selectedChild;\n    var visible = this.state.visible;\n    var optionChildren = React.Children.map(this.props.children, function (child, i) {\n      if (!hasProps(child)) {\n        return null;\n      }\n\n      if (!selectedChild || child.props.selected) {\n        selectedChild = child;\n      }\n\n      var onChildSelect = child.props.onSelect || _this.props.onSelect && _this.props.onSelect.bind(null, child.props.value, i);\n\n      return React.createElement(ToolbarSelectOption, __assign({}, child.props, {\n        onSelect: onChildSelect\n      }));\n    });\n    return React.createElement(\"a\", {\n      className: \"toolbar-select toolbar-button\",\n      onClick: this.handleOpen.bind(this),\n      onMouseDown: preventDefault,\n      ref: function ref(node) {\n        _this._node = node;\n      },\n      title: this.props.title\n    }, selectedChild === null || selectedChild === void 0 ? void 0 : selectedChild.props.label, React.createElement(\"svg\", {\n      width: \"13\",\n      height: \"10\"\n    }, React.createElement(\"path\", {\n      fill: \"#666\",\n      d: \"M 5 5 L 13 5 L 9 1 z\"\n    }), React.createElement(\"path\", {\n      fill: \"#666\",\n      d: \"M 5 6 L 13 6 L 9 10 z\"\n    })), React.createElement(\"ul\", {\n      className: 'toolbar-select-options' + (visible ? ' open' : '')\n    }, optionChildren));\n  };\n\n  ToolbarSelect.prototype._subscribe = function () {\n    if (!this._listener) {\n      this._listener = this.handleClick.bind(this);\n      document.addEventListener('click', this._listener);\n    }\n  };\n\n  ToolbarSelect.prototype._release = function () {\n    if (this._listener) {\n      document.removeEventListener('click', this._listener);\n      this._listener = null;\n    }\n  };\n\n  ToolbarSelect.prototype.handleClick = function (e) {\n    if (this._node !== e.target) {\n      preventDefault(e);\n      this.setState({\n        visible: false\n      });\n\n      this._release();\n    }\n  };\n\n  return ToolbarSelect;\n}(React.Component);\n\nexport { ToolbarSelect };\nexport function ToolbarSelectOption(_a) {\n  var onSelect = _a.onSelect,\n      label = _a.label,\n      selected = _a.selected;\n  return React.createElement(\"li\", {\n    onMouseOver: function onMouseOver(e) {\n      e.currentTarget.className = 'hover';\n    },\n    onMouseOut: function onMouseOut(e) {\n      e.currentTarget.className = '';\n    },\n    onMouseDown: preventDefault,\n    onMouseUp: onSelect\n  }, label, selected && React.createElement(\"svg\", {\n    width: \"13\",\n    height: \"13\"\n  }, React.createElement(\"polygon\", {\n    points: \"4.851,10.462 0,5.611 2.314,3.297 4.851,5.835\\n    10.686,0 13,2.314 4.851,10.462\"\n  })));\n}\n\nfunction preventDefault(e) {\n  e.preventDefault();\n}","map":{"version":3,"sources":["../../src/components/ToolbarSelect.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport React from 'react';\nfunction hasProps(child) {\n    if (!child || typeof child !== 'object' || !('props' in child)) {\n        return false;\n    }\n    return true;\n}\nvar ToolbarSelect = (function (_super) {\n    __extends(ToolbarSelect, _super);\n    function ToolbarSelect(props) {\n        var _this = _super.call(this, props) || this;\n        _this._node = null;\n        _this._listener = null;\n        _this.handleOpen = function (e) {\n            preventDefault(e);\n            _this.setState({ visible: true });\n            _this._subscribe();\n        };\n        _this.state = { visible: false };\n        return _this;\n    }\n    ToolbarSelect.prototype.componentWillUnmount = function () {\n        this._release();\n    };\n    ToolbarSelect.prototype.render = function () {\n        var _this = this;\n        var selectedChild;\n        var visible = this.state.visible;\n        var optionChildren = React.Children.map(this.props.children, function (child, i) {\n            if (!hasProps(child)) {\n                return null;\n            }\n            if (!selectedChild || child.props.selected) {\n                selectedChild = child;\n            }\n            var onChildSelect = child.props.onSelect ||\n                (_this.props.onSelect &&\n                    _this.props.onSelect.bind(null, child.props.value, i));\n            return (React.createElement(ToolbarSelectOption, __assign({}, child.props, { onSelect: onChildSelect })));\n        });\n        return (React.createElement(\"a\", { className: \"toolbar-select toolbar-button\", onClick: this.handleOpen.bind(this), onMouseDown: preventDefault, ref: function (node) {\n                _this._node = node;\n            }, title: this.props.title }, selectedChild === null || selectedChild === void 0 ? void 0 :\n            selectedChild.props.label,\n            React.createElement(\"svg\", { width: \"13\", height: \"10\" },\n                React.createElement(\"path\", { fill: \"#666\", d: \"M 5 5 L 13 5 L 9 1 z\" }),\n                React.createElement(\"path\", { fill: \"#666\", d: \"M 5 6 L 13 6 L 9 10 z\" })),\n            React.createElement(\"ul\", { className: 'toolbar-select-options' + (visible ? ' open' : '') }, optionChildren)));\n    };\n    ToolbarSelect.prototype._subscribe = function () {\n        if (!this._listener) {\n            this._listener = this.handleClick.bind(this);\n            document.addEventListener('click', this._listener);\n        }\n    };\n    ToolbarSelect.prototype._release = function () {\n        if (this._listener) {\n            document.removeEventListener('click', this._listener);\n            this._listener = null;\n        }\n    };\n    ToolbarSelect.prototype.handleClick = function (e) {\n        if (this._node !== e.target) {\n            preventDefault(e);\n            this.setState({ visible: false });\n            this._release();\n        }\n    };\n    return ToolbarSelect;\n}(React.Component));\nexport { ToolbarSelect };\nexport function ToolbarSelectOption(_a) {\n    var onSelect = _a.onSelect, label = _a.label, selected = _a.selected;\n    return (React.createElement(\"li\", { onMouseOver: function (e) {\n            e.currentTarget.className = 'hover';\n        }, onMouseOut: function (e) {\n            e.currentTarget.className = '';\n        }, onMouseDown: preventDefault, onMouseUp: onSelect },\n        label,\n        selected && (React.createElement(\"svg\", { width: \"13\", height: \"13\" },\n            React.createElement(\"polygon\", { points: \"4.851,10.462 0,5.611 2.314,3.297 4.851,5.835\\n    10.686,0 13,2.314 4.851,10.462\" })))));\n}\nfunction preventDefault(e) {\n    e.preventDefault();\n}\n//# sourceMappingURL=ToolbarSelect.js.map"]},"metadata":{},"sourceType":"module"}