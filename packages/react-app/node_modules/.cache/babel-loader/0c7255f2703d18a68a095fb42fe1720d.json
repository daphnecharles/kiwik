{"ast":null,"code":"// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n(function (mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);else // Plain browser env\n    mod(CodeMirror);\n})(function (CodeMirror) {\n  \"use strict\";\n\n  function doFold(cm, pos, options, force) {\n    if (options && options.call) {\n      var finder = options;\n      options = null;\n    } else {\n      var finder = getOption(cm, options, \"rangeFinder\");\n    }\n\n    if (typeof pos == \"number\") pos = CodeMirror.Pos(pos, 0);\n    var minSize = getOption(cm, options, \"minFoldSize\");\n\n    function getRange(allowFolded) {\n      var range = finder(cm, pos);\n      if (!range || range.to.line - range.from.line < minSize) return null;\n      if (force === \"fold\") return range;\n      var marks = cm.findMarksAt(range.from);\n\n      for (var i = 0; i < marks.length; ++i) {\n        if (marks[i].__isFold) {\n          if (!allowFolded) return null;\n          range.cleared = true;\n          marks[i].clear();\n        }\n      }\n\n      return range;\n    }\n\n    var range = getRange(true);\n    if (getOption(cm, options, \"scanUp\")) while (!range && pos.line > cm.firstLine()) {\n      pos = CodeMirror.Pos(pos.line - 1, 0);\n      range = getRange(false);\n    }\n    if (!range || range.cleared || force === \"unfold\") return;\n    var myWidget = makeWidget(cm, options, range);\n    CodeMirror.on(myWidget, \"mousedown\", function (e) {\n      myRange.clear();\n      CodeMirror.e_preventDefault(e);\n    });\n    var myRange = cm.markText(range.from, range.to, {\n      replacedWith: myWidget,\n      clearOnEnter: getOption(cm, options, \"clearOnEnter\"),\n      __isFold: true\n    });\n    myRange.on(\"clear\", function (from, to) {\n      CodeMirror.signal(cm, \"unfold\", cm, from, to);\n    });\n    CodeMirror.signal(cm, \"fold\", cm, range.from, range.to);\n  }\n\n  function makeWidget(cm, options, range) {\n    var widget = getOption(cm, options, \"widget\");\n\n    if (typeof widget == \"function\") {\n      widget = widget(range.from, range.to);\n    }\n\n    if (typeof widget == \"string\") {\n      var text = document.createTextNode(widget);\n      widget = document.createElement(\"span\");\n      widget.appendChild(text);\n      widget.className = \"CodeMirror-foldmarker\";\n    } else if (widget) {\n      widget = widget.cloneNode(true);\n    }\n\n    return widget;\n  } // Clumsy backwards-compatible interface\n\n\n  CodeMirror.newFoldFunction = function (rangeFinder, widget) {\n    return function (cm, pos) {\n      doFold(cm, pos, {\n        rangeFinder: rangeFinder,\n        widget: widget\n      });\n    };\n  }; // New-style interface\n\n\n  CodeMirror.defineExtension(\"foldCode\", function (pos, options, force) {\n    doFold(this, pos, options, force);\n  });\n  CodeMirror.defineExtension(\"isFolded\", function (pos) {\n    var marks = this.findMarksAt(pos);\n\n    for (var i = 0; i < marks.length; ++i) {\n      if (marks[i].__isFold) return true;\n    }\n  });\n\n  CodeMirror.commands.toggleFold = function (cm) {\n    cm.foldCode(cm.getCursor());\n  };\n\n  CodeMirror.commands.fold = function (cm) {\n    cm.foldCode(cm.getCursor(), null, \"fold\");\n  };\n\n  CodeMirror.commands.unfold = function (cm) {\n    cm.foldCode(cm.getCursor(), {\n      scanUp: false\n    }, \"unfold\");\n  };\n\n  CodeMirror.commands.foldAll = function (cm) {\n    cm.operation(function () {\n      for (var i = cm.firstLine(), e = cm.lastLine(); i <= e; i++) {\n        cm.foldCode(CodeMirror.Pos(i, 0), {\n          scanUp: false\n        }, \"fold\");\n      }\n    });\n  };\n\n  CodeMirror.commands.unfoldAll = function (cm) {\n    cm.operation(function () {\n      for (var i = cm.firstLine(), e = cm.lastLine(); i <= e; i++) {\n        cm.foldCode(CodeMirror.Pos(i, 0), {\n          scanUp: false\n        }, \"unfold\");\n      }\n    });\n  };\n\n  CodeMirror.registerHelper(\"fold\", \"combine\", function () {\n    var funcs = Array.prototype.slice.call(arguments, 0);\n    return function (cm, start) {\n      for (var i = 0; i < funcs.length; ++i) {\n        var found = funcs[i](cm, start);\n        if (found) return found;\n      }\n    };\n  });\n  CodeMirror.registerHelper(\"fold\", \"auto\", function (cm, start) {\n    var helpers = cm.getHelpers(start, \"fold\");\n\n    for (var i = 0; i < helpers.length; i++) {\n      var cur = helpers[i](cm, start);\n      if (cur) return cur;\n    }\n  });\n  var defaultOptions = {\n    rangeFinder: CodeMirror.fold.auto,\n    widget: \"\\u2194\",\n    minFoldSize: 0,\n    scanUp: false,\n    clearOnEnter: true\n  };\n  CodeMirror.defineOption(\"foldOptions\", null);\n\n  function getOption(cm, options, name) {\n    if (options && options[name] !== undefined) return options[name];\n    var editorOptions = cm.options.foldOptions;\n    if (editorOptions && editorOptions[name] !== undefined) return editorOptions[name];\n    return defaultOptions[name];\n  }\n\n  CodeMirror.defineExtension(\"foldOption\", function (options, name) {\n    return getOption(this, options, name);\n  });\n});","map":{"version":3,"sources":["/Users/sam/Desktop/kiwik/node_modules/codemirror/addon/fold/foldcode.js"],"names":["mod","exports","module","require","define","amd","CodeMirror","doFold","cm","pos","options","force","call","finder","getOption","Pos","minSize","getRange","allowFolded","range","to","line","from","marks","findMarksAt","i","length","__isFold","cleared","clear","firstLine","myWidget","makeWidget","on","e","myRange","e_preventDefault","markText","replacedWith","clearOnEnter","signal","widget","text","document","createTextNode","createElement","appendChild","className","cloneNode","newFoldFunction","rangeFinder","defineExtension","commands","toggleFold","foldCode","getCursor","fold","unfold","scanUp","foldAll","operation","lastLine","unfoldAll","registerHelper","funcs","Array","prototype","slice","arguments","start","found","helpers","getHelpers","cur","defaultOptions","auto","minFoldSize","defineOption","name","undefined","editorOptions","foldOptions"],"mappings":"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","sourcesContent":["// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  function doFold(cm, pos, options, force) {\n    if (options && options.call) {\n      var finder = options;\n      options = null;\n    } else {\n      var finder = getOption(cm, options, \"rangeFinder\");\n    }\n    if (typeof pos == \"number\") pos = CodeMirror.Pos(pos, 0);\n    var minSize = getOption(cm, options, \"minFoldSize\");\n\n    function getRange(allowFolded) {\n      var range = finder(cm, pos);\n      if (!range || range.to.line - range.from.line < minSize) return null;\n      if (force === \"fold\") return range;\n\n      var marks = cm.findMarksAt(range.from);\n      for (var i = 0; i < marks.length; ++i) {\n        if (marks[i].__isFold) {\n          if (!allowFolded) return null;\n          range.cleared = true;\n          marks[i].clear();\n        }\n      }\n      return range;\n    }\n\n    var range = getRange(true);\n    if (getOption(cm, options, \"scanUp\")) while (!range && pos.line > cm.firstLine()) {\n      pos = CodeMirror.Pos(pos.line - 1, 0);\n      range = getRange(false);\n    }\n    if (!range || range.cleared || force === \"unfold\") return;\n\n    var myWidget = makeWidget(cm, options, range);\n    CodeMirror.on(myWidget, \"mousedown\", function(e) {\n      myRange.clear();\n      CodeMirror.e_preventDefault(e);\n    });\n    var myRange = cm.markText(range.from, range.to, {\n      replacedWith: myWidget,\n      clearOnEnter: getOption(cm, options, \"clearOnEnter\"),\n      __isFold: true\n    });\n    myRange.on(\"clear\", function(from, to) {\n      CodeMirror.signal(cm, \"unfold\", cm, from, to);\n    });\n    CodeMirror.signal(cm, \"fold\", cm, range.from, range.to);\n  }\n\n  function makeWidget(cm, options, range) {\n    var widget = getOption(cm, options, \"widget\");\n\n    if (typeof widget == \"function\") {\n      widget = widget(range.from, range.to);\n    }\n\n    if (typeof widget == \"string\") {\n      var text = document.createTextNode(widget);\n      widget = document.createElement(\"span\");\n      widget.appendChild(text);\n      widget.className = \"CodeMirror-foldmarker\";\n    } else if (widget) {\n      widget = widget.cloneNode(true)\n    }\n    return widget;\n  }\n\n  // Clumsy backwards-compatible interface\n  CodeMirror.newFoldFunction = function(rangeFinder, widget) {\n    return function(cm, pos) { doFold(cm, pos, {rangeFinder: rangeFinder, widget: widget}); };\n  };\n\n  // New-style interface\n  CodeMirror.defineExtension(\"foldCode\", function(pos, options, force) {\n    doFold(this, pos, options, force);\n  });\n\n  CodeMirror.defineExtension(\"isFolded\", function(pos) {\n    var marks = this.findMarksAt(pos);\n    for (var i = 0; i < marks.length; ++i)\n      if (marks[i].__isFold) return true;\n  });\n\n  CodeMirror.commands.toggleFold = function(cm) {\n    cm.foldCode(cm.getCursor());\n  };\n  CodeMirror.commands.fold = function(cm) {\n    cm.foldCode(cm.getCursor(), null, \"fold\");\n  };\n  CodeMirror.commands.unfold = function(cm) {\n    cm.foldCode(cm.getCursor(), { scanUp: false }, \"unfold\");\n  };\n  CodeMirror.commands.foldAll = function(cm) {\n    cm.operation(function() {\n      for (var i = cm.firstLine(), e = cm.lastLine(); i <= e; i++)\n        cm.foldCode(CodeMirror.Pos(i, 0), { scanUp: false }, \"fold\");\n    });\n  };\n  CodeMirror.commands.unfoldAll = function(cm) {\n    cm.operation(function() {\n      for (var i = cm.firstLine(), e = cm.lastLine(); i <= e; i++)\n        cm.foldCode(CodeMirror.Pos(i, 0), { scanUp: false }, \"unfold\");\n    });\n  };\n\n  CodeMirror.registerHelper(\"fold\", \"combine\", function() {\n    var funcs = Array.prototype.slice.call(arguments, 0);\n    return function(cm, start) {\n      for (var i = 0; i < funcs.length; ++i) {\n        var found = funcs[i](cm, start);\n        if (found) return found;\n      }\n    };\n  });\n\n  CodeMirror.registerHelper(\"fold\", \"auto\", function(cm, start) {\n    var helpers = cm.getHelpers(start, \"fold\");\n    for (var i = 0; i < helpers.length; i++) {\n      var cur = helpers[i](cm, start);\n      if (cur) return cur;\n    }\n  });\n\n  var defaultOptions = {\n    rangeFinder: CodeMirror.fold.auto,\n    widget: \"\\u2194\",\n    minFoldSize: 0,\n    scanUp: false,\n    clearOnEnter: true\n  };\n\n  CodeMirror.defineOption(\"foldOptions\", null);\n\n  function getOption(cm, options, name) {\n    if (options && options[name] !== undefined)\n      return options[name];\n    var editorOptions = cm.options.foldOptions;\n    if (editorOptions && editorOptions[name] !== undefined)\n      return editorOptions[name];\n    return defaultOptions[name];\n  }\n\n  CodeMirror.defineExtension(\"foldOption\", function(options, name) {\n    return getOption(this, options, name);\n  });\n});\n"]},"metadata":{},"sourceType":"script"}