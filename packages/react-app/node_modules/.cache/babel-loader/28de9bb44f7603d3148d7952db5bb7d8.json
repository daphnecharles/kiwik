{"ast":null,"code":"import _slicedToArray from \"/Users/sam/Desktop/kiwik/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _regeneratorRuntime from \"/Users/sam/Desktop/kiwik/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/sam/Desktop/kiwik/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _s = $RefreshSig$();\n\nimport { useCallback, useEffect, useState } from \"react\";\nimport { ethers } from \"ethers\";\n\nvar createProvider = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(url) {\n    var p;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            p = new ethers.providers.StaticJsonRpcProvider(url);\n            _context.next = 3;\n            return p.ready;\n\n          case 3:\n            return _context.abrupt(\"return\", p);\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function createProvider(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexport default function useStaticJsonRPC(urlArray) {\n  _s();\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      provider = _useState2[0],\n      setProvider = _useState2[1];\n\n  var handleProviders = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var p, _p;\n\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return Promise.race(urlArray.map(createProvider));\n\n          case 3:\n            p = _context2.sent;\n            _context2.next = 6;\n            return p;\n\n          case 6:\n            _p = _context2.sent;\n            setProvider(_p);\n            _context2.next = 13;\n            break;\n\n          case 10:\n            _context2.prev = 10;\n            _context2.t0 = _context2[\"catch\"](0);\n            // todo: show notification error about provider issues\n            console.log(_context2.t0);\n\n          case 13:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[0, 10]]);\n  })), [urlArray]);\n  useEffect(function () {\n    handleProviders(); // eslint-disable-next-line\n  }, [JSON.stringify(urlArray)]);\n  return provider;\n}\n\n_s(useStaticJsonRPC, \"/2xxz5UzLV/r/IXRlLyJQA12Q34=\");","map":{"version":3,"sources":["/Users/sam/Desktop/kiwik/packages/react-app/src/hooks/useStaticJsonRPC.js"],"names":["useCallback","useEffect","useState","ethers","createProvider","url","p","providers","StaticJsonRpcProvider","ready","useStaticJsonRPC","urlArray","provider","setProvider","handleProviders","Promise","race","map","_p","console","log","JSON","stringify"],"mappings":";;;;;;AAAA,SAASA,WAAT,EAAsBC,SAAtB,EAAiCC,QAAjC,QAAiD,OAAjD;AACA,SAASC,MAAT,QAAuB,QAAvB;;AAEA,IAAMC,cAAc;AAAA,sEAAG,iBAAMC,GAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AACfC,YAAAA,CADe,GACX,IAAIH,MAAM,CAACI,SAAP,CAAiBC,qBAArB,CAA2CH,GAA3C,CADW;AAAA;AAAA,mBAGfC,CAAC,CAACG,KAHa;;AAAA;AAAA,6CAKdH,CALc;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAdF,cAAc;AAAA;AAAA;AAAA,GAApB;;AAQA,eAAe,SAASM,gBAAT,CAA0BC,QAA1B,EAAoC;AAAA;;AACjD,kBAAgCT,QAAQ,CAAC,IAAD,CAAxC;AAAA;AAAA,MAAOU,QAAP;AAAA,MAAiBC,WAAjB;;AAEA,MAAMC,eAAe,GAAGd,WAAW,wEAAC;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAEhBe,OAAO,CAACC,IAAR,CAAaL,QAAQ,CAACM,GAAT,CAAab,cAAb,CAAb,CAFgB;;AAAA;AAE1BE,YAAAA,CAF0B;AAAA;AAAA,mBAGfA,CAHe;;AAAA;AAG1BY,YAAAA,EAH0B;AAKhCL,YAAAA,WAAW,CAACK,EAAD,CAAX;AALgC;AAAA;;AAAA;AAAA;AAAA;AAOhC;AACAC,YAAAA,OAAO,CAACC,GAAR;;AARgC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAD,IAUhC,CAACT,QAAD,CAVgC,CAAnC;AAYAV,EAAAA,SAAS,CAAC,YAAM;AACda,IAAAA,eAAe,GADD,CAEd;AACD,GAHQ,EAGN,CAACO,IAAI,CAACC,SAAL,CAAeX,QAAf,CAAD,CAHM,CAAT;AAKA,SAAOC,QAAP;AACD;;GArBuBF,gB","sourcesContent":["import { useCallback, useEffect, useState } from \"react\";\nimport { ethers } from \"ethers\";\n\nconst createProvider = async url => {\n  const p = new ethers.providers.StaticJsonRpcProvider(url);\n\n  await p.ready;\n\n  return p;\n};\n\nexport default function useStaticJsonRPC(urlArray) {\n  const [provider, setProvider] = useState(null);\n\n  const handleProviders = useCallback(async () => {\n    try {\n      const p = await Promise.race(urlArray.map(createProvider));\n      const _p = await p;\n\n      setProvider(_p);\n    } catch (error) {\n      // todo: show notification error about provider issues\n      console.log(error);\n    }\n  }, [urlArray]);\n\n  useEffect(() => {\n    handleProviders();\n    // eslint-disable-next-line\n  }, [JSON.stringify(urlArray)]);\n\n  return provider;\n}\n"]},"metadata":{},"sourceType":"module"}