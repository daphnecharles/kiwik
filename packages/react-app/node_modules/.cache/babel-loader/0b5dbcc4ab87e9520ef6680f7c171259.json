{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction hintList(cursor, token, list) {\n  var hints = filterAndSortList(list, normalizeText(token.string));\n\n  if (!hints) {\n    return;\n  }\n\n  var tokenStart = token.type !== null && /\"|\\w/.test(token.string[0]) ? token.start : token.end;\n  return {\n    list: hints,\n    from: {\n      line: cursor.line,\n      ch: tokenStart\n    },\n    to: {\n      line: cursor.line,\n      ch: token.end\n    }\n  };\n}\n\nexports.default = hintList;\n\nfunction filterAndSortList(list, text) {\n  if (!text) {\n    return filterNonEmpty(list, function (entry) {\n      return !entry.isDeprecated;\n    });\n  }\n\n  var byProximity = list.map(function (entry) {\n    return {\n      proximity: getProximity(normalizeText(entry.text), text),\n      entry: entry\n    };\n  });\n  var conciseMatches = filterNonEmpty(filterNonEmpty(byProximity, function (pair) {\n    return pair.proximity <= 2;\n  }), function (pair) {\n    return !pair.entry.isDeprecated;\n  });\n  var sortedMatches = conciseMatches.sort(function (a, b) {\n    return (a.entry.isDeprecated ? 1 : 0) - (b.entry.isDeprecated ? 1 : 0) || a.proximity - b.proximity || a.entry.text.length - b.entry.text.length;\n  });\n  return sortedMatches.map(function (pair) {\n    return pair.entry;\n  });\n}\n\nfunction filterNonEmpty(array, predicate) {\n  var filtered = array.filter(predicate);\n  return filtered.length === 0 ? array : filtered;\n}\n\nfunction normalizeText(text) {\n  return text.toLowerCase().replace(/\\W/g, '');\n}\n\nfunction getProximity(suggestion, text) {\n  var proximity = lexicalDistance(text, suggestion);\n\n  if (suggestion.length > text.length) {\n    proximity -= suggestion.length - text.length - 1;\n    proximity += suggestion.indexOf(text) === 0 ? 0 : 0.5;\n  }\n\n  return proximity;\n}\n\nfunction lexicalDistance(a, b) {\n  var i;\n  var j;\n  var d = [];\n  var aLength = a.length;\n  var bLength = b.length;\n\n  for (i = 0; i <= aLength; i++) {\n    d[i] = [i];\n  }\n\n  for (j = 1; j <= bLength; j++) {\n    d[0][j] = j;\n  }\n\n  for (i = 1; i <= aLength; i++) {\n    for (j = 1; j <= bLength; j++) {\n      var cost = a[i - 1] === b[j - 1] ? 0 : 1;\n      d[i][j] = Math.min(d[i - 1][j] + 1, d[i][j - 1] + 1, d[i - 1][j - 1] + cost);\n\n      if (i > 1 && j > 1 && a[i - 1] === b[j - 2] && a[i - 2] === b[j - 1]) {\n        d[i][j] = Math.min(d[i][j], d[i - 2][j - 2] + cost);\n      }\n    }\n  }\n\n  return d[aLength][bLength];\n}","map":{"version":3,"sources":["../src/utils/hintList.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction hintList(cursor, token, list) {\n    var hints = filterAndSortList(list, normalizeText(token.string));\n    if (!hints) {\n        return;\n    }\n    var tokenStart = token.type !== null && /\"|\\w/.test(token.string[0])\n        ? token.start\n        : token.end;\n    return {\n        list: hints,\n        from: { line: cursor.line, ch: tokenStart },\n        to: { line: cursor.line, ch: token.end },\n    };\n}\nexports.default = hintList;\nfunction filterAndSortList(list, text) {\n    if (!text) {\n        return filterNonEmpty(list, function (entry) { return !entry.isDeprecated; });\n    }\n    var byProximity = list.map(function (entry) { return ({\n        proximity: getProximity(normalizeText(entry.text), text),\n        entry: entry,\n    }); });\n    var conciseMatches = filterNonEmpty(filterNonEmpty(byProximity, function (pair) { return pair.proximity <= 2; }), function (pair) { return !pair.entry.isDeprecated; });\n    var sortedMatches = conciseMatches.sort(function (a, b) {\n        return (a.entry.isDeprecated ? 1 : 0) - (b.entry.isDeprecated ? 1 : 0) ||\n            a.proximity - b.proximity ||\n            a.entry.text.length - b.entry.text.length;\n    });\n    return sortedMatches.map(function (pair) { return pair.entry; });\n}\nfunction filterNonEmpty(array, predicate) {\n    var filtered = array.filter(predicate);\n    return filtered.length === 0 ? array : filtered;\n}\nfunction normalizeText(text) {\n    return text.toLowerCase().replace(/\\W/g, '');\n}\nfunction getProximity(suggestion, text) {\n    var proximity = lexicalDistance(text, suggestion);\n    if (suggestion.length > text.length) {\n        proximity -= suggestion.length - text.length - 1;\n        proximity += suggestion.indexOf(text) === 0 ? 0 : 0.5;\n    }\n    return proximity;\n}\nfunction lexicalDistance(a, b) {\n    var i;\n    var j;\n    var d = [];\n    var aLength = a.length;\n    var bLength = b.length;\n    for (i = 0; i <= aLength; i++) {\n        d[i] = [i];\n    }\n    for (j = 1; j <= bLength; j++) {\n        d[0][j] = j;\n    }\n    for (i = 1; i <= aLength; i++) {\n        for (j = 1; j <= bLength; j++) {\n            var cost = a[i - 1] === b[j - 1] ? 0 : 1;\n            d[i][j] = Math.min(d[i - 1][j] + 1, d[i][j - 1] + 1, d[i - 1][j - 1] + cost);\n            if (i > 1 && j > 1 && a[i - 1] === b[j - 2] && a[i - 2] === b[j - 1]) {\n                d[i][j] = Math.min(d[i][j], d[i - 2][j - 2] + cost);\n            }\n        }\n    }\n    return d[aLength][bLength];\n}\n//# sourceMappingURL=hintList.js.map"]},"metadata":{},"sourceType":"script"}