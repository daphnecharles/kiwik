{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar cid = require('multiformats/cid');\n\nvar pbDecode = require('./pb-decode.js');\n\nvar pbEncode = require('./pb-encode.js');\n\nvar util = require('./util.js');\n\nvar name = 'dag-pb';\nvar code = 112;\n\nfunction encode(node) {\n  util.validate(node);\n  var pbn = {};\n\n  if (node.Links) {\n    pbn.Links = node.Links.map(function (l) {\n      var link = {};\n\n      if (l.Hash) {\n        link.Hash = l.Hash.bytes;\n      }\n\n      if (l.Name !== undefined) {\n        link.Name = l.Name;\n      }\n\n      if (l.Tsize !== undefined) {\n        link.Tsize = l.Tsize;\n      }\n\n      return link;\n    });\n  }\n\n  if (node.Data) {\n    pbn.Data = node.Data;\n  }\n\n  return pbEncode.encodeNode(pbn);\n}\n\nfunction decode(bytes) {\n  var pbn = pbDecode.decodeNode(bytes);\n  var node = {};\n\n  if (pbn.Data) {\n    node.Data = pbn.Data;\n  }\n\n  if (pbn.Links) {\n    node.Links = pbn.Links.map(function (l) {\n      var link = {};\n\n      try {\n        link.Hash = cid.CID.decode(l.Hash);\n      } catch (e) {}\n\n      if (!link.Hash) {\n        throw new Error('Invalid Hash field found in link, expected CID');\n      }\n\n      if (l.Name !== undefined) {\n        link.Name = l.Name;\n      }\n\n      if (l.Tsize !== undefined) {\n        link.Tsize = l.Tsize;\n      }\n\n      return link;\n    });\n  }\n\n  return node;\n}\n\nexports.createLink = util.createLink;\nexports.createNode = util.createNode;\nexports.prepare = util.prepare;\nexports.validate = util.validate;\nexports.code = code;\nexports.decode = decode;\nexports.encode = encode;\nexports.name = name;","map":{"version":3,"sources":["/Users/sam/Desktop/kiwik/node_modules/@ipld/dag-pb/cjs/src/index.js"],"names":["Object","defineProperty","exports","value","cid","require","pbDecode","pbEncode","util","name","code","encode","node","validate","pbn","Links","map","l","link","Hash","bytes","Name","undefined","Tsize","Data","encodeNode","decode","decodeNode","CID","e","Error","createLink","createNode","prepare"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar cid = require('multiformats/cid');\nvar pbDecode = require('./pb-decode.js');\nvar pbEncode = require('./pb-encode.js');\nvar util = require('./util.js');\n\nconst name = 'dag-pb';\nconst code = 112;\nfunction encode(node) {\n  util.validate(node);\n  const pbn = {};\n  if (node.Links) {\n    pbn.Links = node.Links.map(l => {\n      const link = {};\n      if (l.Hash) {\n        link.Hash = l.Hash.bytes;\n      }\n      if (l.Name !== undefined) {\n        link.Name = l.Name;\n      }\n      if (l.Tsize !== undefined) {\n        link.Tsize = l.Tsize;\n      }\n      return link;\n    });\n  }\n  if (node.Data) {\n    pbn.Data = node.Data;\n  }\n  return pbEncode.encodeNode(pbn);\n}\nfunction decode(bytes) {\n  const pbn = pbDecode.decodeNode(bytes);\n  const node = {};\n  if (pbn.Data) {\n    node.Data = pbn.Data;\n  }\n  if (pbn.Links) {\n    node.Links = pbn.Links.map(l => {\n      const link = {};\n      try {\n        link.Hash = cid.CID.decode(l.Hash);\n      } catch (e) {\n      }\n      if (!link.Hash) {\n        throw new Error('Invalid Hash field found in link, expected CID');\n      }\n      if (l.Name !== undefined) {\n        link.Name = l.Name;\n      }\n      if (l.Tsize !== undefined) {\n        link.Tsize = l.Tsize;\n      }\n      return link;\n    });\n  }\n  return node;\n}\n\nexports.createLink = util.createLink;\nexports.createNode = util.createNode;\nexports.prepare = util.prepare;\nexports.validate = util.validate;\nexports.code = code;\nexports.decode = decode;\nexports.encode = encode;\nexports.name = name;\n"]},"metadata":{},"sourceType":"script"}