{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar codemirror_1 = __importDefault(require(\"codemirror\"));\n\nrequire(\"codemirror/addon/hint/show-hint\");\n\nvar graphql_language_service_interface_1 = require(\"graphql-language-service-interface\");\n\nvar graphql_language_service_utils_1 = require(\"graphql-language-service-utils\");\n\ncodemirror_1.default.registerHelper('hint', 'graphql', function (editor, options) {\n  var schema = options.schema;\n\n  if (!schema) {\n    return;\n  }\n\n  var cur = editor.getCursor();\n  var token = editor.getTokenAt(cur);\n  var tokenStart = token.type !== null && /\"|\\w/.test(token.string[0]) ? token.start : token.end;\n  var position = new graphql_language_service_utils_1.Position(cur.line, tokenStart);\n  var rawResults = graphql_language_service_interface_1.getAutocompleteSuggestions(schema, editor.getValue(), position, token, options.externalFragments);\n  var results = {\n    list: rawResults.map(function (item) {\n      return {\n        text: item.label,\n        type: item.type,\n        description: item.documentation,\n        isDeprecated: item.isDeprecated,\n        deprecationReason: item.deprecationReason\n      };\n    }),\n    from: {\n      line: cur.line,\n      ch: tokenStart\n    },\n    to: {\n      line: cur.line,\n      ch: token.end\n    }\n  };\n\n  if (results && results.list && results.list.length > 0) {\n    results.from = codemirror_1.default.Pos(results.from.line, results.from.ch);\n    results.to = codemirror_1.default.Pos(results.to.line, results.to.ch);\n    codemirror_1.default.signal(editor, 'hasCompletion', editor, results, token);\n  }\n\n  return results;\n});","map":{"version":3,"sources":["src/hint.ts"],"names":[],"mappings":";;;;;;;;;;;;AAWA,IAAA,YAAA,GAAA,eAAA,CAAA,OAAA,CAAA,YAAA,CAAA,CAAA;;AACA,OAAA,CAAA,iCAAA,CAAA;;AAGA,IAAA,oCAAA,GAAA,OAAA,CAAA,oCAAA,CAAA;;AAEA,IAAA,gCAAA,GAAA,OAAA,CAAA,gCAAA,CAAA;;AAiDA,YAAA,CAAA,OAAA,CAAW,cAAX,CACE,MADF,EAEE,SAFF,EAGE,UACE,MADF,EAEE,OAFF,EAE6B;AAE3B,MAAM,MAAM,GAAG,OAAO,CAAC,MAAvB;;AACA,MAAI,CAAC,MAAL,EAAa;AACX;AACD;;AAED,MAAM,GAAG,GAAG,MAAM,CAAC,SAAP,EAAZ;AACA,MAAM,KAAK,GAAG,MAAM,CAAC,UAAP,CAAkB,GAAlB,CAAd;AAEA,MAAM,UAAU,GACd,KAAK,CAAC,IAAN,KAAe,IAAf,IAAuB,OAAO,IAAP,CAAY,KAAK,CAAC,MAAN,CAAa,CAAb,CAAZ,CAAvB,GACI,KAAK,CAAC,KADV,GAEI,KAAK,CAAC,GAHZ;AAKA,MAAM,QAAQ,GAAG,IAAI,gCAAA,CAAA,QAAJ,CAAa,GAAG,CAAC,IAAjB,EAAuB,UAAvB,CAAjB;AAEA,MAAM,UAAU,GAAG,oCAAA,CAAA,0BAAA,CACjB,MADiB,EAEjB,MAAM,CAAC,QAAP,EAFiB,EAGjB,QAHiB,EAIjB,KAJiB,EAKjB,OAAO,CAAC,iBALS,CAAnB;AAQA,MAAM,OAAO,GAAG;AACd,IAAA,IAAI,EAAE,UAAU,CAAC,GAAX,CAAe,UAAA,IAAA,EAAI;AAAI,aAAC;AAC5B,QAAA,IAAI,EAAE,IAAI,CAAC,KADiB;AAE5B,QAAA,IAAI,EAAE,IAAI,CAAC,IAFiB;AAG5B,QAAA,WAAW,EAAE,IAAI,CAAC,aAHU;AAI5B,QAAA,YAAY,EAAE,IAAI,CAAC,YAJS;AAK5B,QAAA,iBAAiB,EAAE,IAAI,CAAC;AALI,OAAD;AAM3B,KANI,CADQ;AAQd,IAAA,IAAI,EAAE;AAAE,MAAA,IAAI,EAAE,GAAG,CAAC,IAAZ;AAAkB,MAAA,EAAE,EAAE;AAAtB,KARQ;AASd,IAAA,EAAE,EAAE;AAAE,MAAA,IAAI,EAAE,GAAG,CAAC,IAAZ;AAAkB,MAAA,EAAE,EAAE,KAAK,CAAC;AAA5B;AATU,GAAhB;;AAYA,MAAI,OAAO,IAAI,OAAO,CAAC,IAAnB,IAA2B,OAAO,CAAC,IAAR,CAAa,MAAb,GAAsB,CAArD,EAAwD;AACtD,IAAA,OAAO,CAAC,IAAR,GAAe,YAAA,CAAA,OAAA,CAAW,GAAX,CAAe,OAAO,CAAC,IAAR,CAAa,IAA5B,EAAkC,OAAO,CAAC,IAAR,CAAa,EAA/C,CAAf;AACA,IAAA,OAAO,CAAC,EAAR,GAAa,YAAA,CAAA,OAAA,CAAW,GAAX,CAAe,OAAO,CAAC,EAAR,CAAW,IAA1B,EAAgC,OAAO,CAAC,EAAR,CAAW,EAA3C,CAAb;AACA,IAAA,YAAA,CAAA,OAAA,CAAW,MAAX,CAAkB,MAAlB,EAA0B,eAA1B,EAA2C,MAA3C,EAAmD,OAAnD,EAA4D,KAA5D;AACD;;AAED,SAAO,OAAP;AACD,CAjDH","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar codemirror_1 = __importDefault(require(\"codemirror\"));\nrequire(\"codemirror/addon/hint/show-hint\");\nvar graphql_language_service_interface_1 = require(\"graphql-language-service-interface\");\nvar graphql_language_service_utils_1 = require(\"graphql-language-service-utils\");\ncodemirror_1.default.registerHelper('hint', 'graphql', function (editor, options) {\n    var schema = options.schema;\n    if (!schema) {\n        return;\n    }\n    var cur = editor.getCursor();\n    var token = editor.getTokenAt(cur);\n    var tokenStart = token.type !== null && /\"|\\w/.test(token.string[0])\n        ? token.start\n        : token.end;\n    var position = new graphql_language_service_utils_1.Position(cur.line, tokenStart);\n    var rawResults = graphql_language_service_interface_1.getAutocompleteSuggestions(schema, editor.getValue(), position, token, options.externalFragments);\n    var results = {\n        list: rawResults.map(function (item) { return ({\n            text: item.label,\n            type: item.type,\n            description: item.documentation,\n            isDeprecated: item.isDeprecated,\n            deprecationReason: item.deprecationReason,\n        }); }),\n        from: { line: cur.line, ch: tokenStart },\n        to: { line: cur.line, ch: token.end },\n    };\n    if (results && results.list && results.list.length > 0) {\n        results.from = codemirror_1.default.Pos(results.from.line, results.from.ch);\n        results.to = codemirror_1.default.Pos(results.to.line, results.to.ch);\n        codemirror_1.default.signal(editor, 'hasCompletion', editor, results, token);\n    }\n    return results;\n});\n//# sourceMappingURL=hint.js.map"]},"metadata":{},"sourceType":"script"}