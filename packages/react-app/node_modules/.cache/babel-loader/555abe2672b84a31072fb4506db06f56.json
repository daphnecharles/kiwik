{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/sam/Desktop/kiwik/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _classCallCheck = require(\"/Users/sam/Desktop/kiwik/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/sam/Desktop/kiwik/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _inherits = require(\"/Users/sam/Desktop/kiwik/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _createSuper = require(\"/Users/sam/Desktop/kiwik/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createSuper\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  }\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar waterfall_1 = __importDefault(require(\"async/waterfall\"));\n\nvar ethUtil = __importStar(require(\"ethereumjs-util\"));\n\nvar xtend_1 = __importDefault(require(\"xtend\"));\n\nvar web3_provider_engine_1 = __importDefault(require(\"web3-provider-engine\"));\n\nvar hooked_wallet_1 = __importDefault(require(\"web3-provider-engine/subproviders/hooked-wallet\"));\n\nvar rpc_1 = __importDefault(require(\"web3-provider-engine/subproviders/rpc\"));\n\nvar subscriptions_1 = __importDefault(require(\"web3-provider-engine/subproviders/subscriptions\"));\n\nvar filters_1 = __importDefault(require(\"web3-provider-engine/subproviders/filters\"));\n\nvar pify_1 = __importDefault(require(\"pify\"));\n\nvar web3Utils = __importStar(require(\"web3-utils\"));\n\nvar AuthereumSDK_1 = __importDefault(require(\"./AuthereumSDK\"));\n\nvar utils_1 = require(\"./utils\");\n\nvar AuthereumProvider = /*#__PURE__*/function (_web3_provider_engine) {\n  _inherits(AuthereumProvider, _web3_provider_engine);\n\n  var _super = _createSuper(AuthereumProvider);\n\n  function AuthereumProvider(config) {\n    var _this;\n\n    _classCallCheck(this, AuthereumProvider);\n\n    _this = _super.call(this);\n    _this.isAuthereum = true;\n    _this.lastSignTx = '';\n    _this.lastSignTxTimeout = null;\n    _this.lastTx = '';\n    _this.lastTxTimeout = null;\n    _this.lastMsg = '';\n    _this.lastMsgTimeout = null;\n    _this.lastTypedMsg = '';\n    _this.lastTypedMsgTimeout = null;\n    var authereumClient = null;\n\n    if (config instanceof AuthereumSDK_1.default) {\n      authereumClient = config;\n      config = authereumClient.config;\n    }\n\n    _this.config = config || {};\n    _this.authereum = authereumClient || new AuthereumSDK_1.default(_this.config);\n\n    _this.initSubprovider();\n\n    _this.isAuthereum = true;\n    return _this;\n  }\n\n  _createClass(AuthereumProvider, [{\n    key: \"initSubprovider\",\n    value: function initSubprovider() {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee27() {\n        var _this2 = this;\n\n        var throttleTimeout, walletSubprovider;\n        return _regeneratorRuntime.wrap(function _callee27$(_context27) {\n          while (1) {\n            switch (_context27.prev = _context27.next) {\n              case 0:\n                _context27.next = 2;\n                return this.authereum._tilReady();\n\n              case 2:\n                _context27.t0 = this.config.rpcUri;\n\n                if (_context27.t0) {\n                  _context27.next = 7;\n                  break;\n                }\n\n                _context27.next = 6;\n                return this.authereum.getRpcUri();\n\n              case 6:\n                _context27.t0 = _context27.sent;\n\n              case 7:\n                this.rpcUri = _context27.t0;\n                throttleTimeout = 2e3;\n                walletSubprovider = new hooked_wallet_1.default({\n                  getAccounts: function getAccounts(cb) {\n                    return __awaiter(_this2, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n                      var loggedIn, accountAddress;\n                      return _regeneratorRuntime.wrap(function _callee$(_context) {\n                        while (1) {\n                          switch (_context.prev = _context.next) {\n                            case 0:\n                              _context.next = 2;\n                              return this.authereum.isAuthenticated();\n\n                            case 2:\n                              loggedIn = _context.sent;\n\n                              if (loggedIn) {\n                                _context.next = 6;\n                                break;\n                              }\n\n                              if (cb) {\n                                cb(null, []);\n                              }\n\n                              return _context.abrupt(\"return\", []);\n\n                            case 6:\n                              _context.next = 8;\n                              return this.authereum.getAccountAddress();\n\n                            case 8:\n                              accountAddress = _context.sent;\n\n                              if (accountAddress) {\n                                _context.next = 12;\n                                break;\n                              }\n\n                              if (cb) {\n                                cb(null, []);\n                              }\n\n                              return _context.abrupt(\"return\", []);\n\n                            case 12:\n                              if (cb) {\n                                cb(null, [accountAddress]);\n                              }\n\n                              return _context.abrupt(\"return\", [accountAddress]);\n\n                            case 14:\n                            case \"end\":\n                              return _context.stop();\n                          }\n                        }\n                      }, _callee, this);\n                    }));\n                  },\n                  approveTransaction: function approveTransaction(txParams, cb) {\n                    return __awaiter(_this2, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n                      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                        while (1) {\n                          switch (_context2.prev = _context2.next) {\n                            case 0:\n                              if (cb) {\n                                cb(null, true);\n                              }\n\n                              return _context2.abrupt(\"return\", true);\n\n                            case 2:\n                            case \"end\":\n                              return _context2.stop();\n                          }\n                        }\n                      }, _callee2);\n                    }));\n                  },\n                  approveMessage: function approveMessage(msgParams, cb) {\n                    return __awaiter(_this2, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n                      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n                        while (1) {\n                          switch (_context3.prev = _context3.next) {\n                            case 0:\n                              if (cb) {\n                                cb(null, true);\n                              }\n\n                              return _context3.abrupt(\"return\", true);\n\n                            case 2:\n                            case \"end\":\n                              return _context3.stop();\n                          }\n                        }\n                      }, _callee3);\n                    }));\n                  },\n                  approveTypedMessage: function approveTypedMessage(msgParams, cb) {\n                    return __awaiter(_this2, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n                      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n                        while (1) {\n                          switch (_context4.prev = _context4.next) {\n                            case 0:\n                              if (cb) {\n                                cb(null, true);\n                              }\n\n                              return _context4.abrupt(\"return\", true);\n\n                            case 2:\n                            case \"end\":\n                              return _context4.stop();\n                          }\n                        }\n                      }, _callee4);\n                    }));\n                  },\n                  signMessage: function signMessage(msgParams, cb) {\n                    return __awaiter(_this2, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n                      var _this3 = this;\n\n                      var currentMsg, isFirst;\n                      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n                        while (1) {\n                          switch (_context5.prev = _context5.next) {\n                            case 0:\n                              currentMsg = msgParams;\n\n                              try {\n                                currentMsg = JSON.stringify(msgParams);\n                              } catch (err) {// noop\n                              } // Throttle if the tx is identical\n\n\n                              clearTimeout(this.lastMsgTimeout);\n\n                              if (!(this.lastMsg === currentMsg)) {\n                                _context5.next = 5;\n                                break;\n                              }\n\n                              return _context5.abrupt(\"return\", this._throttledSignMessage(msgParams, cb));\n\n                            case 5:\n                              // Check if this is the first one. If so, run it through the throttling function\n                              isFirst = !this.lastMsg;\n                              this.lastMsg = currentMsg;\n                              this.lastMsgTimeout = setTimeout(function () {\n                                _this3.lastMsg = '';\n                              }, throttleTimeout);\n\n                              if (!isFirst) {\n                                _context5.next = 10;\n                                break;\n                              }\n\n                              return _context5.abrupt(\"return\", this._throttledSignMessage(msgParams, cb));\n\n                            case 10:\n                              return _context5.abrupt(\"return\", this._signMessage(msgParams, cb));\n\n                            case 11:\n                            case \"end\":\n                              return _context5.stop();\n                          }\n                        }\n                      }, _callee5, this);\n                    }));\n                  },\n                  signTransaction: function signTransaction(txParams, cb) {\n                    return __awaiter(_this2, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n                      var _this4 = this;\n\n                      var t, currentTx, isFirst;\n                      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n                        while (1) {\n                          switch (_context6.prev = _context6.next) {\n                            case 0:\n                              t = Object.assign({}, txParams);\n                              t.nonce = null; // Throttle if the tx is identical\n\n                              currentTx = JSON.stringify(t);\n                              clearTimeout(this.lastSignTxTimeout);\n\n                              if (!(this.lastSignTx === currentTx)) {\n                                _context6.next = 6;\n                                break;\n                              }\n\n                              return _context6.abrupt(\"return\", this._throttledSignTransaction(txParams, cb));\n\n                            case 6:\n                              // Check if this is the first one. If so, run it through the throttling function\n                              isFirst = !this.lastSignTx;\n                              this.lastSignTx = currentTx;\n                              this.lastSignTxTimeout = setTimeout(function () {\n                                _this4.lastSignTx = '';\n                              }, throttleTimeout);\n\n                              if (!isFirst) {\n                                _context6.next = 11;\n                                break;\n                              }\n\n                              return _context6.abrupt(\"return\", this._throttledSignTransaction(txParams, cb));\n\n                            case 11:\n                              return _context6.abrupt(\"return\", this._signTransaction(txParams, cb));\n\n                            case 12:\n                            case \"end\":\n                              return _context6.stop();\n                          }\n                        }\n                      }, _callee6, this);\n                    }));\n                  },\n                  processSignTransaction: function processSignTransaction(txParams, cb) {\n                    return __awaiter(_this2, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {\n                      var _this5 = this;\n\n                      var t, currentTx, isFirst;\n                      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n                        while (1) {\n                          switch (_context7.prev = _context7.next) {\n                            case 0:\n                              t = Object.assign({}, txParams);\n                              t.nonce = null; // Throttle if the tx is identical\n\n                              currentTx = JSON.stringify(t);\n                              clearTimeout(this.lastTxTimeout);\n\n                              if (!(this.lastTx === currentTx)) {\n                                _context7.next = 6;\n                                break;\n                              }\n\n                              return _context7.abrupt(\"return\", this._throttledProcessSignTransaction(txParams, cb));\n\n                            case 6:\n                              // Check if this is the first one. If so, run it through the throttling function\n                              isFirst = !this.lastTx;\n                              this.lastTx = currentTx;\n                              this.lastTxTimeout = setTimeout(function () {\n                                _this5.lastTx = '';\n                              }, throttleTimeout);\n\n                              if (!isFirst) {\n                                _context7.next = 11;\n                                break;\n                              }\n\n                              return _context7.abrupt(\"return\", this._throttledProcessSignTransaction(txParams, cb));\n\n                            case 11:\n                              return _context7.abrupt(\"return\", walletSubprovider.finalizeTx(txParams, cb));\n\n                            case 12:\n                            case \"end\":\n                              return _context7.stop();\n                          }\n                        }\n                      }, _callee7, this);\n                    }));\n                  },\n                  processTransaction: function processTransaction(txParams, cb) {\n                    return __awaiter(_this2, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee8() {\n                      var _this6 = this;\n\n                      var t, currentTx, isFirst;\n                      return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n                        while (1) {\n                          switch (_context8.prev = _context8.next) {\n                            case 0:\n                              t = Object.assign({}, txParams);\n                              t.nonce = null; // Throttle if the tx is identical\n\n                              currentTx = JSON.stringify(t);\n                              clearTimeout(this.lastTxTimeout);\n\n                              if (!(this.lastTx === currentTx)) {\n                                _context8.next = 6;\n                                break;\n                              }\n\n                              return _context8.abrupt(\"return\", this._throttledProcessTransaction(txParams, cb));\n\n                            case 6:\n                              // Check if this is the first one. If so, run it through the throttling function\n                              isFirst = !this.lastTx;\n                              this.lastTx = currentTx;\n                              this.lastTxTimeout = setTimeout(function () {\n                                _this6.lastTx = '';\n                              }, throttleTimeout);\n\n                              if (!isFirst) {\n                                _context8.next = 11;\n                                break;\n                              }\n\n                              return _context8.abrupt(\"return\", this._throttledProcessTransaction(txParams, cb));\n\n                            case 11:\n                              return _context8.abrupt(\"return\", this._processTransaction(txParams, cb));\n\n                            case 12:\n                            case \"end\":\n                              return _context8.stop();\n                          }\n                        }\n                      }, _callee8, this);\n                    }));\n                  },\n                  finalizeTx: function finalizeTx(txParams, cb) {\n                    return __awaiter(_this2, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee9() {\n                      var signedTx, res;\n                      return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n                        while (1) {\n                          switch (_context9.prev = _context9.next) {\n                            case 0:\n                              _context9.prev = 0;\n                              _context9.next = 3;\n                              return this._signTransaction(txParams);\n\n                            case 3:\n                              signedTx = _context9.sent;\n                              res = {\n                                raw: signedTx,\n                                tx: txParams\n                              };\n\n                              if (cb) {\n                                cb(null, res);\n                              }\n\n                              return _context9.abrupt(\"return\", res);\n\n                            case 9:\n                              _context9.prev = 9;\n                              _context9.t0 = _context9[\"catch\"](0);\n\n                              if (cb) {\n                                cb(_context9.t0);\n                              }\n\n                              throw _context9.t0;\n\n                            case 13:\n                            case \"end\":\n                              return _context9.stop();\n                          }\n                        }\n                      }, _callee9, this, [[0, 9]]);\n                    }));\n                  },\n                  approvePersonalMessage: function approvePersonalMessage(msgParams, cb) {\n                    return __awaiter(_this2, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee10() {\n                      return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n                        while (1) {\n                          switch (_context10.prev = _context10.next) {\n                            case 0:\n                              if (cb) {\n                                cb(null, true);\n                              }\n\n                              return _context10.abrupt(\"return\", true);\n\n                            case 2:\n                            case \"end\":\n                              return _context10.stop();\n                          }\n                        }\n                      }, _callee10);\n                    }));\n                  },\n                  signPersonalMessage: function signPersonalMessage(msgParams, cb) {\n                    return __awaiter(_this2, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee11() {\n                      return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n                        while (1) {\n                          switch (_context11.prev = _context11.next) {\n                            case 0:\n                              msgParams.personal = true;\n                              return _context11.abrupt(\"return\", walletSubprovider.signMessage(msgParams, cb));\n\n                            case 2:\n                            case \"end\":\n                              return _context11.stop();\n                          }\n                        }\n                      }, _callee11);\n                    }));\n                  },\n                  signTypedMessage: function signTypedMessage(msgParams, cb) {\n                    return __awaiter(_this2, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee12() {\n                      var _this7 = this;\n\n                      var currentTypedMsg, isFirst;\n                      return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n                        while (1) {\n                          switch (_context12.prev = _context12.next) {\n                            case 0:\n                              currentTypedMsg = msgParams;\n\n                              try {\n                                currentTypedMsg = JSON.stringify(msgParams);\n                              } catch (err) {// noop\n                              } // Throttle if the tx is identical\n\n\n                              clearTimeout(this.lastTypedMsgTimeout);\n\n                              if (!(this.lastTypedMsg === currentTypedMsg)) {\n                                _context12.next = 5;\n                                break;\n                              }\n\n                              return _context12.abrupt(\"return\", this._throttledSignTypedMessage(msgParams, cb));\n\n                            case 5:\n                              // Check if this is the first one. If so, run it through the throttling function\n                              isFirst = !this.lastTypedMsg;\n                              this.lastTypedMsg = currentTypedMsg;\n                              this.lastTypedMsgTimeout = setTimeout(function () {\n                                _this7.lastTypedMsg = '';\n                              }, throttleTimeout);\n\n                              if (!isFirst) {\n                                _context12.next = 10;\n                                break;\n                              }\n\n                              return _context12.abrupt(\"return\", this._throttledSignTypedMessage(msgParams, cb));\n\n                            case 10:\n                              return _context12.abrupt(\"return\", this._signTypedMessage(msgParams, cb));\n\n                            case 11:\n                            case \"end\":\n                              return _context12.stop();\n                          }\n                        }\n                      }, _callee12, this);\n                    }));\n                  }\n                });\n                this.walletSubprovider = walletSubprovider;\n\n                this._processTransaction = function (txParams, cb) {\n                  return __awaiter(_this2, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee13() {\n                    var signedTransaction, transactionHash;\n                    return _regeneratorRuntime.wrap(function _callee13$(_context13) {\n                      while (1) {\n                        switch (_context13.prev = _context13.next) {\n                          case 0:\n                            _context13.prev = 0;\n                            _context13.next = 3;\n                            return pify_1.default(walletSubprovider.signTransaction.bind(walletSubprovider))(txParams);\n\n                          case 3:\n                            signedTransaction = _context13.sent;\n                            transactionHash = web3Utils.sha3(signedTransaction);\n\n                            if (cb) {\n                              cb(null, transactionHash);\n                            }\n\n                            return _context13.abrupt(\"return\", transactionHash);\n\n                          case 9:\n                            _context13.prev = 9;\n                            _context13.t0 = _context13[\"catch\"](0);\n\n                            if (!cb) {\n                              _context13.next = 14;\n                              break;\n                            }\n\n                            cb(_context13.t0);\n                            return _context13.abrupt(\"return\");\n\n                          case 14:\n                            throw _context13.t0;\n\n                          case 15:\n                          case \"end\":\n                            return _context13.stop();\n                        }\n                      }\n                    }, _callee13, null, [[0, 9]]);\n                  }));\n                };\n\n                this._throttledProcessSignTransaction = utils_1.throttle(function (txParams, cb) {\n                  return __awaiter(_this2, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee14() {\n                    return _regeneratorRuntime.wrap(function _callee14$(_context14) {\n                      while (1) {\n                        switch (_context14.prev = _context14.next) {\n                          case 0:\n                            return _context14.abrupt(\"return\", walletSubprovider.finalizeTx(txParams, cb));\n\n                          case 1:\n                          case \"end\":\n                            return _context14.stop();\n                        }\n                      }\n                    }, _callee14);\n                  }));\n                }, throttleTimeout);\n                this._throttledProcessTransaction = utils_1.throttle(function (txParams, cb) {\n                  return __awaiter(_this2, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee15() {\n                    return _regeneratorRuntime.wrap(function _callee15$(_context15) {\n                      while (1) {\n                        switch (_context15.prev = _context15.next) {\n                          case 0:\n                            return _context15.abrupt(\"return\", this._processTransaction(txParams, cb));\n\n                          case 1:\n                          case \"end\":\n                            return _context15.stop();\n                        }\n                      }\n                    }, _callee15, this);\n                  }));\n                }, throttleTimeout);\n\n                this._signMessage = function (msgParams, cb) {\n                  return __awaiter(_this2, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee16() {\n                    var signature;\n                    return _regeneratorRuntime.wrap(function _callee16$(_context16) {\n                      while (1) {\n                        switch (_context16.prev = _context16.next) {\n                          case 0:\n                            _context16.prev = 0;\n                            _context16.next = 3;\n                            return this.authereum.signMessage(msgParams.data, {\n                              personal: msgParams.personal,\n                              includeAuthSignature: true\n                            });\n\n                          case 3:\n                            signature = _context16.sent;\n\n                            if (cb) {\n                              cb(null, signature);\n                            }\n\n                            return _context16.abrupt(\"return\", signature);\n\n                          case 8:\n                            _context16.prev = 8;\n                            _context16.t0 = _context16[\"catch\"](0);\n\n                            if (cb) {\n                              cb(_context16.t0);\n                            }\n\n                          case 11:\n                          case \"end\":\n                            return _context16.stop();\n                        }\n                      }\n                    }, _callee16, this, [[0, 8]]);\n                  }));\n                };\n\n                this._throttledSignMessage = utils_1.throttle(function (msgParams, cb) {\n                  return __awaiter(_this2, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee17() {\n                    return _regeneratorRuntime.wrap(function _callee17$(_context17) {\n                      while (1) {\n                        switch (_context17.prev = _context17.next) {\n                          case 0:\n                            return _context17.abrupt(\"return\", this._signMessage(msgParams, cb));\n\n                          case 1:\n                          case \"end\":\n                            return _context17.stop();\n                        }\n                      }\n                    }, _callee17, this);\n                  }));\n                }, throttleTimeout);\n\n                this._signTypedMessage = function (msgParams, cb) {\n                  return __awaiter(_this2, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee18() {\n                    var signature;\n                    return _regeneratorRuntime.wrap(function _callee18$(_context18) {\n                      while (1) {\n                        switch (_context18.prev = _context18.next) {\n                          case 0:\n                            _context18.prev = 0;\n                            _context18.next = 3;\n                            return this.authereum.signMessage(msgParams.data, {\n                              includeAuthSignature: true\n                            });\n\n                          case 3:\n                            signature = _context18.sent;\n\n                            if (cb) {\n                              cb(null, signature);\n                            }\n\n                            return _context18.abrupt(\"return\", signature);\n\n                          case 8:\n                            _context18.prev = 8;\n                            _context18.t0 = _context18[\"catch\"](0);\n\n                            if (cb) {\n                              cb(_context18.t0);\n                            }\n\n                          case 11:\n                          case \"end\":\n                            return _context18.stop();\n                        }\n                      }\n                    }, _callee18, this, [[0, 8]]);\n                  }));\n                };\n\n                this._throttledSignTypedMessage = utils_1.throttle(function (msgParams, cb) {\n                  return __awaiter(_this2, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee19() {\n                    return _regeneratorRuntime.wrap(function _callee19$(_context19) {\n                      while (1) {\n                        switch (_context19.prev = _context19.next) {\n                          case 0:\n                            return _context19.abrupt(\"return\", this._signTypedMessage(msgParams, cb));\n\n                          case 1:\n                          case \"end\":\n                            return _context19.stop();\n                        }\n                      }\n                    }, _callee19, this);\n                  }));\n                }, throttleTimeout);\n\n                this._signTransaction = function (txParams, cb) {\n                  return __awaiter(_this2, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee20() {\n                    var res;\n                    return _regeneratorRuntime.wrap(function _callee20$(_context20) {\n                      while (1) {\n                        switch (_context20.prev = _context20.next) {\n                          case 0:\n                            _context20.prev = 0;\n                            _context20.next = 3;\n                            return this.authereum.signTransaction(txParams);\n\n                          case 3:\n                            res = _context20.sent;\n\n                            if (res) {\n                              _context20.next = 6;\n                              break;\n                            }\n\n                            throw new Error('Error signing transaction');\n\n                          case 6:\n                            if (cb) {\n                              cb(null, res.signedTransactionData);\n                            }\n\n                            return _context20.abrupt(\"return\", res.signedTransactionData);\n\n                          case 10:\n                            _context20.prev = 10;\n                            _context20.t0 = _context20[\"catch\"](0);\n                            cb(_context20.t0);\n\n                          case 13:\n                          case \"end\":\n                            return _context20.stop();\n                        }\n                      }\n                    }, _callee20, this, [[0, 10]]);\n                  }));\n                };\n\n                this._throttledSignTransaction = utils_1.throttle(function (txParams, cb) {\n                  return __awaiter(_this2, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee21() {\n                    return _regeneratorRuntime.wrap(function _callee21$(_context21) {\n                      while (1) {\n                        switch (_context21.prev = _context21.next) {\n                          case 0:\n                            return _context21.abrupt(\"return\", this._signTransaction(txParams, cb));\n\n                          case 1:\n                          case \"end\":\n                            return _context21.stop();\n                        }\n                      }\n                    }, _callee21, this);\n                  }));\n                }, throttleTimeout); // keep reference to original sendAsync\n\n                this._sendAsync = this.sendAsync;\n\n                this.sendAsync = function (payload, callback) {\n                  return __awaiter(_this2, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee22() {\n                    var _this8 = this;\n\n                    return _regeneratorRuntime.wrap(function _callee22$(_context22) {\n                      while (1) {\n                        switch (_context22.prev = _context22.next) {\n                          case 0:\n                            return _context22.abrupt(\"return\", new Promise(function (resolve, reject) {\n                              if (!callback) {\n                                callback = function callback(err, response) {\n                                  if (err) {\n                                    reject(err);\n                                    return;\n                                  }\n\n                                  resolve(response);\n                                };\n                              }\n\n                              _this8._sendAsync(payload, callback);\n                            }));\n\n                          case 1:\n                          case \"end\":\n                            return _context22.stop();\n                        }\n                      }\n                    }, _callee22);\n                  }));\n                };\n\n                this.send = function (payload, callback) {\n                  // Web3 >=1.0-beta.38 calls `send` with method and parameters\n                  if (typeof payload === 'string') {\n                    return new Promise(function (resolve, reject) {\n                      _this2.sendAsync({\n                        jsonrpc: '2.0',\n                        id: 1,\n                        method: payload,\n                        params: callback || []\n                      }, function (error, response) {\n                        if (error) {\n                          reject(error);\n                        } else {\n                          resolve(response.result);\n                        }\n                      });\n                    });\n                  } // Web3 <=1.0 beta.37 uses `send` with a callback for async queries\n\n\n                  if (callback) {\n                    _this2.sendAsync(payload, callback);\n\n                    return;\n                  }\n\n                  var result = null;\n\n                  switch (payload.method) {\n                    case 'eth_uninstallFilter':\n                      _this2.sendAsync(payload, function () {// noop\n                      });\n\n                      result = true;\n                      break;\n\n                    default:\n                      var message = \"The Authereum Web3 object does not support synchronous methods like \".concat(payload.method, \" without a callback parameter.\");\n                      throw new Error(message);\n                  }\n\n                  return {\n                    id: payload.id,\n                    jsonrpc: payload.jsonrpc,\n                    result: result\n                  };\n                };\n\n                walletSubprovider.handleRequest = function (payload, next, end) {\n                  var self = walletSubprovider;\n                  self._parityRequests = {};\n                  self._parityRequestCount = 0; // switch statement is not block scoped\n                  // sp we cant repeat var declarations\n\n                  var txParams;\n                  var msgParams;\n                  var extraParams;\n                  var message;\n                  var address;\n                  var method = payload.method;\n\n                  if (method && method.startsWith('stark_')) {\n                    _this2.authereum.getStarkProvider().send(method, payload.params).then(function (result) {\n                      return end(null, result);\n                    }).catch(function (err) {\n                      return end(err);\n                    });\n\n                    return;\n                  }\n\n                  switch (method) {\n                    case 'eth_coinbase':\n                      {\n                        // process normally\n                        self.getAccounts(function (err, accounts) {\n                          if (err) return end(err);\n                          var result = accounts[0] || null;\n                          end(null, result);\n                        });\n                        return;\n                      }\n\n                    case 'eth_accounts':\n                      {\n                        // process normally\n                        self.getAccounts(function (err, accounts) {\n                          if (err) return end(err);\n                          end(null, accounts);\n                        });\n                        return;\n                      }\n\n                    case 'eth_sendTransaction':\n                      {\n                        txParams = payload.params[0];\n                        waterfall_1.default([function (cb) {\n                          return self.processTransaction(txParams, cb);\n                        }], end);\n                        return;\n                      }\n\n                    case 'eth_signTransaction':\n                      {\n                        txParams = payload.params[0];\n                        waterfall_1.default([function (cb) {\n                          return self.processSignTransaction(txParams, cb);\n                        }], end);\n                        return;\n                      }\n\n                    case 'eth_sign':\n                      {\n                        // process normally\n                        address = payload.params[0];\n                        message = payload.params[1]; // non-standard \"extraParams\" to be appended to our \"msgParams\" obj\n                        // good place for metadata\n\n                        extraParams = payload.params[2] || {};\n                        msgParams = xtend_1.default(extraParams, {\n                          from: address,\n                          data: message\n                        });\n                        waterfall_1.default([function (cb) {\n                          return self.processMessage(msgParams, cb);\n                        }], end);\n                        return;\n                      }\n\n                    case 'personal_sign':\n                      {\n                        return function () {\n                          // process normally\n                          var first = payload.params[0];\n                          var second = payload.params[1]; // We initially incorrectly ordered these parameters.\n                          // To gracefully respect users who adopted this API early,\n                          // we are currently gracefully recovering from the wrong param order\n                          // when it is clearly identifiable.\n                          //\n                          // That means when the first param is definitely an address,\n                          // and the second param is definitely not, but is hex.\n\n                          if (resemblesData(second) && resemblesAddress(first)) {\n                            var warning = \"The eth_personalSign method requires params ordered \";\n                            warning += \"[message, address]. This was previously handled incorrectly, \";\n                            warning += \"and has been corrected automatically. \";\n                            warning += \"Please switch this param order for smooth behavior in the future.\";\n                            console.warn(warning);\n                            address = payload.params[0];\n                            message = payload.params[1];\n                          } else {\n                            message = payload.params[0];\n                            address = payload.params[1];\n                          } // non-standard \"extraParams\" to be appended to our \"msgParams\" obj\n                          // good place for metadata\n\n\n                          extraParams = payload.params[2] || {};\n                          msgParams = xtend_1.default(extraParams, {\n                            from: address,\n                            data: message\n                          });\n                          waterfall_1.default([function (cb) {\n                            return self.processPersonalMessage(msgParams, cb);\n                          }], end);\n                        }();\n                      }\n\n                    case 'eth_decryptMessage':\n                      {\n                        return function () {\n                          // process normally\n                          var first = payload.params[0];\n                          var second = payload.params[1]; // We initially incorrectly ordered these parameters.\n                          // To gracefully respect users who adopted this API early,\n                          // we are currently gracefully recovering from the wrong param order\n                          // when it is clearly identifiable.\n                          //\n                          // That means when the first param is definitely an address,\n                          // and the second param is definitely not, but is hex.\n\n                          if (resemblesData(second) && resemblesAddress(first)) {\n                            var warning = \"The eth_decryptMessage method requires params ordered \";\n                            warning += \"[message, address]. This was previously handled incorrectly, \";\n                            warning += \"and has been corrected automatically. \";\n                            warning += \"Please switch this param order for smooth behavior in the future.\";\n                            console.warn(warning);\n                            address = payload.params[0];\n                            message = payload.params[1];\n                          } else {\n                            message = payload.params[0];\n                            address = payload.params[1];\n                          } // non-standard \"extraParams\" to be appended to our \"msgParams\" obj\n                          // good place for metadata\n\n\n                          extraParams = payload.params[2] || {};\n                          msgParams = xtend_1.default(extraParams, {\n                            from: address,\n                            data: message\n                          });\n                          waterfall_1.default([function (cb) {\n                            return self.validateDecryptMessage(msgParams, cb);\n                          }, function (cb) {\n                            return self.processDecryptMessage(msgParams, cb);\n                          }], end);\n                        }();\n                      }\n\n                    case 'eth_getEncryptionKey':\n                      {\n                        _this2.authereum.getEncryptionPublicKey().then(function (result) {\n                          return end(null, result);\n                        }).catch(function (err) {\n                          return end(err);\n                        });\n\n                        return;\n                      }\n\n                    case 'eth_decrypt':\n                      {\n                        var encryptedMessage = payload.params[0];\n\n                        _this2.authereum.decryptMessage().then(function (result) {\n                          return end(null, result);\n                        }).catch(function (err) {\n                          return end(err);\n                        });\n\n                        return;\n                      }\n\n                    case 'encryption_public_key':\n                      {\n                        return function () {\n                          address = payload.params[0];\n                          waterfall_1.default([function (cb) {\n                            return self.validateEncryptionPublicKey(address, cb);\n                          }, function (cb) {\n                            return self.processEncryptionPublicKey(address, cb);\n                          }], end);\n                        }();\n                      }\n\n                    case 'personal_ecRecover':\n                      {\n                        return function () {\n                          message = payload.params[0];\n                          var signature = payload.params[1]; // non-standard \"extraParams\" to be appended to our \"msgParams\" obj\n                          // good place for metadata\n\n                          extraParams = payload.params[2] || {};\n                          msgParams = xtend_1.default(extraParams, {\n                            sig: signature,\n                            data: message\n                          });\n                          self.recoverPersonalSignature(msgParams, end);\n                        }();\n                      }\n\n                    case 'eth_signTypedData':\n                      {\n                        // process normally\n                        message = payload.params[0];\n                        address = payload.params[1];\n                        extraParams = payload.params[2] || {};\n                        msgParams = xtend_1.default(extraParams, {\n                          from: address,\n                          data: message\n                        });\n                        waterfall_1.default([function (cb) {\n                          return self.processTypedMessage(msgParams, cb);\n                        }], end);\n                        return;\n                      }\n\n                    case 'eth_signTypedData_v3':\n                      {\n                        // process normally\n                        address = payload.params[0];\n                        message = payload.params[1];\n                        extraParams = payload.params[2] || {};\n                        msgParams = xtend_1.default(extraParams, {\n                          from: address,\n                          data: message\n                        });\n                        waterfall_1.default([function (cb) {\n                          return self.processTypedMessage(msgParams, cb);\n                        }], end);\n                        return;\n                      }\n\n                    case 'parity_postTransaction':\n                      {\n                        txParams = payload.params[0];\n                        self.parityPostTransaction(txParams, end);\n                        return;\n                      }\n\n                    case 'parity_postSign':\n                      {\n                        address = payload.params[0];\n                        message = payload.params[1];\n                        self.parityPostSign(address, message, end);\n                        return;\n                      }\n\n                    case 'parity_checkRequest':\n                      {\n                        return function () {\n                          var requestId = payload.params[0];\n                          self.parityCheckRequest(requestId, end);\n                        }();\n                      }\n\n                    case 'parity_defaultAccount':\n                      {\n                        self.getAccounts(function (err, accounts) {\n                          if (err) return end(err);\n                          var account = accounts[0] || null;\n                          end(null, account);\n                        });\n                        return;\n                      }\n\n                    case 'eth_requestAccounts':\n                      {\n                        self.getAccounts(function (err, accounts) {\n                          if (err) return end(err);\n                          end(null, accounts);\n                        });\n                        return;\n                      }\n\n                    default:\n                      {\n                        next();\n                        return;\n                      }\n                  }\n                };\n\n                walletSubprovider.validatePersonalMessage = function (msgParams, cb) {\n                  return __awaiter(_this2, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee23() {\n                    return _regeneratorRuntime.wrap(function _callee23$(_context23) {\n                      while (1) {\n                        switch (_context23.prev = _context23.next) {\n                          case 0:\n                            if (cb) {\n                              cb(null, true);\n                            }\n\n                            return _context23.abrupt(\"return\", true);\n\n                          case 2:\n                          case \"end\":\n                            return _context23.stop();\n                        }\n                      }\n                    }, _callee23);\n                  }));\n                };\n\n                walletSubprovider.validateMessage = function (msgParams, cb) {\n                  return __awaiter(_this2, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee24() {\n                    return _regeneratorRuntime.wrap(function _callee24$(_context24) {\n                      while (1) {\n                        switch (_context24.prev = _context24.next) {\n                          case 0:\n                            if (cb) {\n                              cb(null, true);\n                            }\n\n                            return _context24.abrupt(\"return\", true);\n\n                          case 2:\n                          case \"end\":\n                            return _context24.stop();\n                        }\n                      }\n                    }, _callee24);\n                  }));\n                };\n\n                walletSubprovider.validateTypedMessage = function (msgParams, cb) {\n                  return __awaiter(_this2, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee25() {\n                    return _regeneratorRuntime.wrap(function _callee25$(_context25) {\n                      while (1) {\n                        switch (_context25.prev = _context25.next) {\n                          case 0:\n                            if (cb) {\n                              cb(null, true);\n                            }\n\n                            return _context25.abrupt(\"return\", true);\n\n                          case 2:\n                          case \"end\":\n                            return _context25.stop();\n                        }\n                      }\n                    }, _callee25);\n                  }));\n                };\n\n                this.addProvider(walletSubprovider);\n                this.rpcSubProvider = new rpc_1.default({\n                  rpcUrl: this.rpcUri\n                });\n                this.addProvider(new subscriptions_1.default());\n                this.addProvider(new filters_1.default());\n                this.addProvider({\n                  setEngine: function setEngine(_) {\n                    return _;\n                  },\n                  handleRequest: function handleRequest(payload, next, end) {\n                    return __awaiter(_this2, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee26() {\n                      return _regeneratorRuntime.wrap(function _callee26$(_context26) {\n                        while (1) {\n                          switch (_context26.prev = _context26.next) {\n                            case 0:\n                              this.rpcSubProvider.handleRequest(payload, next, end);\n\n                            case 1:\n                            case \"end\":\n                              return _context26.stop();\n                          }\n                        }\n                      }, _callee26, this);\n                    }));\n                  }\n                }); // network connectivity error\n\n                this.on('error', function (err) {\n                  console.error(err.stack);\n                }); // start polling\n\n                this.start();\n\n                this._blockTracker.removeAllListeners();\n\n              case 35:\n              case \"end\":\n                return _context27.stop();\n            }\n          }\n        }, _callee27, this);\n      }));\n    }\n  }, {\n    key: \"getAccounts\",\n    value: function getAccounts(cb) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee28() {\n        var loggedIn, accountAddress;\n        return _regeneratorRuntime.wrap(function _callee28$(_context28) {\n          while (1) {\n            switch (_context28.prev = _context28.next) {\n              case 0:\n                _context28.next = 2;\n                return this.authereum.isAuthenticated();\n\n              case 2:\n                loggedIn = _context28.sent;\n\n                if (loggedIn) {\n                  _context28.next = 6;\n                  break;\n                }\n\n                if (cb) {\n                  cb(null, []);\n                }\n\n                return _context28.abrupt(\"return\", []);\n\n              case 6:\n                _context28.next = 8;\n                return this.authereum.getAccountAddress();\n\n              case 8:\n                accountAddress = _context28.sent;\n\n                if (accountAddress) {\n                  _context28.next = 12;\n                  break;\n                }\n\n                if (cb) {\n                  cb(null, []);\n                }\n\n                return _context28.abrupt(\"return\", []);\n\n              case 12:\n                if (cb) {\n                  cb(null, [accountAddress]);\n                }\n\n                return _context28.abrupt(\"return\", [accountAddress]);\n\n              case 14:\n              case \"end\":\n                return _context28.stop();\n            }\n          }\n        }, _callee28, this);\n      }));\n    }\n  }, {\n    key: \"isConnected\",\n    value: function isConnected() {\n      return this.authereum.isAuthenticatedSync();\n    }\n  }, {\n    key: \"enable\",\n    value: function enable() {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee29() {\n        var accountAddress;\n        return _regeneratorRuntime.wrap(function _callee29$(_context29) {\n          while (1) {\n            switch (_context29.prev = _context29.next) {\n              case 0:\n                _context29.next = 2;\n                return this.authereum.login();\n\n              case 2:\n                _context29.next = 4;\n                return this.authereum.getAccountAddress();\n\n              case 4:\n                accountAddress = _context29.sent;\n\n                if (!accountAddress) {\n                  _context29.next = 7;\n                  break;\n                }\n\n                return _context29.abrupt(\"return\", [accountAddress]);\n\n              case 7:\n                return _context29.abrupt(\"return\", []);\n\n              case 8:\n              case \"end\":\n                return _context29.stop();\n            }\n          }\n        }, _callee29, this);\n      }));\n    }\n  }, {\n    key: \"disable\",\n    value: function disable() {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee30() {\n        return _regeneratorRuntime.wrap(function _callee30$(_context30) {\n          while (1) {\n            switch (_context30.prev = _context30.next) {\n              case 0:\n                return _context30.abrupt(\"return\", this.authereum.logout());\n\n              case 1:\n              case \"end\":\n                return _context30.stop();\n            }\n          }\n        }, _callee30, this);\n      }));\n    }\n  }, {\n    key: \"tilDomReady\",\n    value: function tilDomReady() {\n      return new Promise(function (resolve) {\n        if (document.readyState !== 'loading') {\n          resolve();\n        } else {\n          document.addEventListener('DOMContentLoaded', function () {\n            return resolve();\n          });\n        }\n      });\n    }\n  }, {\n    key: \"sendTransaction\",\n    value: function sendTransaction(tx) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee31() {\n        return _regeneratorRuntime.wrap(function _callee31$(_context31) {\n          while (1) {\n            switch (_context31.prev = _context31.next) {\n              case 0:\n                return _context31.abrupt(\"return\", this.sendTransactionBatch([tx]));\n\n              case 1:\n              case \"end\":\n                return _context31.stop();\n            }\n          }\n        }, _callee31, this);\n      }));\n    }\n  }, {\n    key: \"sendTransactionBatch\",\n    value: function sendTransactionBatch(txs) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee32() {\n        return _regeneratorRuntime.wrap(function _callee32$(_context32) {\n          while (1) {\n            switch (_context32.prev = _context32.next) {\n              case 0:\n                return _context32.abrupt(\"return\", this.authereum.sendTransactionBatch(txs));\n\n              case 1:\n              case \"end\":\n                return _context32.stop();\n            }\n          }\n        }, _callee32, this);\n      }));\n    }\n  }, {\n    key: \"estimateGasBatch\",\n    value: function estimateGasBatch(txs) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee33() {\n        return _regeneratorRuntime.wrap(function _callee33$(_context33) {\n          while (1) {\n            switch (_context33.prev = _context33.next) {\n              case 0:\n                return _context33.abrupt(\"return\", this.authereum.estimateGasBatch(txs));\n\n              case 1:\n              case \"end\":\n                return _context33.stop();\n            }\n          }\n        }, _callee33, this);\n      }));\n    }\n  }, {\n    key: \"sign\",\n    value: function sign(msgParams) {\n      return this._signMessage(msgParams);\n    }\n  }, {\n    key: \"signMessageWithAdminKey\",\n    value: function signMessageWithAdminKey(message) {\n      return this.authereum.signMessageWithAdminKey(message);\n    }\n  }, {\n    key: \"signMessageWithSigningKey\",\n    value: function signMessageWithSigningKey() {\n      var _this$authereum;\n\n      return (_this$authereum = this.authereum).signMessageWithSigningKey.apply(_this$authereum, arguments);\n    }\n  }, {\n    key: \"showWidget\",\n    value: function showWidget() {\n      var enabled = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      return this.authereum.showWidget(enabled);\n    }\n  }, {\n    key: \"widgetEnabled\",\n    value: function widgetEnabled() {\n      return this.authereum.widgetEnabled();\n    }\n  }, {\n    key: \"getTransactionReceipt\",\n    value: function getTransactionReceipt(txHash) {\n      return this.authereum.getTransactionReceipt(txHash);\n    }\n  }, {\n    key: \"waitForTransactionReceipt\",\n    value: function waitForTransactionReceipt(txHash) {\n      return this.authereum.waitForTransactionReceipt(txHash);\n    }\n  }, {\n    key: \"isContractDeployed\",\n    value: function isContractDeployed(accountAddress) {\n      return this.authereum.isContractDeployed(accountAddress);\n    }\n  }, {\n    key: \"getEncryptionPublicKey\",\n    value: function getEncryptionPublicKey() {\n      return this.authereum.getEncryptionPublicKey();\n    }\n  }, {\n    key: \"encryptMessage\",\n    value: function encryptMessage(message) {\n      return this.authereum.encryptMessage(message);\n    }\n  }, {\n    key: \"decryptMessage\",\n    value: function decryptMessage(encryptedMessage) {\n      return this.authereum.decryptMessage(encryptedMessage);\n    }\n  }]);\n\n  return AuthereumProvider;\n}(web3_provider_engine_1.default);\n\nexports.default = AuthereumProvider;\n\nfunction resemblesAddress(str) {\n  var fixed = ethUtil.addHexPrefix(str);\n  var isValid = ethUtil.isValidAddress(fixed);\n  return isValid;\n} // Returns true if resembles hex data\n// but definitely not a valid address.\n\n\nfunction resemblesData(str) {\n  var fixed = ethUtil.addHexPrefix(str);\n  var isValidAddress = ethUtil.isValidAddress(fixed);\n  return !isValidAddress && isValidHex(str);\n}\n\nfunction isValidHex(data) {\n  var isString = typeof data === 'string';\n  if (!isString) return false;\n  var isHexPrefixed = data.slice(0, 2) === '0x';\n  if (!isHexPrefixed) return false;\n  var nonPrefixed = data.slice(2);\n  var hexRegex = /^[0-9A-Fa-f]+$/g;\n  var isValid = nonPrefixed.match(hexRegex);\n  return isValid;\n}","map":{"version":3,"sources":["/Users/sam/Desktop/kiwik/node_modules/authereum/dist/AuthereumProvider.js"],"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__importDefault","mod","__esModule","__importStar","k","Object","hasOwnProperty","call","defineProperty","exports","waterfall_1","require","ethUtil","xtend_1","web3_provider_engine_1","hooked_wallet_1","rpc_1","subscriptions_1","filters_1","pify_1","web3Utils","AuthereumSDK_1","utils_1","AuthereumProvider","config","isAuthereum","lastSignTx","lastSignTxTimeout","lastTx","lastTxTimeout","lastMsg","lastMsgTimeout","lastTypedMsg","lastTypedMsgTimeout","authereumClient","default","authereum","initSubprovider","_tilReady","rpcUri","getRpcUri","throttleTimeout","walletSubprovider","getAccounts","cb","isAuthenticated","loggedIn","getAccountAddress","accountAddress","approveTransaction","txParams","approveMessage","msgParams","approveTypedMessage","signMessage","currentMsg","JSON","stringify","err","clearTimeout","_throttledSignMessage","isFirst","setTimeout","_signMessage","signTransaction","t","assign","nonce","currentTx","_throttledSignTransaction","_signTransaction","processSignTransaction","_throttledProcessSignTransaction","finalizeTx","processTransaction","_throttledProcessTransaction","_processTransaction","signedTx","res","raw","tx","approvePersonalMessage","signPersonalMessage","personal","signTypedMessage","currentTypedMsg","_throttledSignTypedMessage","_signTypedMessage","bind","signedTransaction","transactionHash","sha3","throttle","data","includeAuthSignature","signature","Error","signedTransactionData","_sendAsync","sendAsync","payload","callback","response","send","jsonrpc","id","method","params","error","message","handleRequest","end","self","_parityRequests","_parityRequestCount","extraParams","address","startsWith","getStarkProvider","catch","accounts","from","processMessage","first","second","resemblesData","resemblesAddress","warning","console","warn","processPersonalMessage","validateDecryptMessage","processDecryptMessage","getEncryptionPublicKey","encryptedMessage","decryptMessage","validateEncryptionPublicKey","processEncryptionPublicKey","sig","recoverPersonalSignature","processTypedMessage","parityPostTransaction","parityPostSign","requestId","parityCheckRequest","account","validatePersonalMessage","validateMessage","validateTypedMessage","addProvider","rpcSubProvider","rpcUrl","setEngine","_","on","stack","start","_blockTracker","removeAllListeners","isAuthenticatedSync","login","logout","document","readyState","addEventListener","sendTransactionBatch","txs","estimateGasBatch","signMessageWithAdminKey","signMessageWithSigningKey","enabled","showWidget","widgetEnabled","txHash","getTransactionReceipt","waitForTransactionReceipt","isContractDeployed","encryptMessage","str","fixed","addHexPrefix","isValid","isValidAddress","isValidHex","isString","isHexPrefixed","slice","nonPrefixed","hexRegex","match"],"mappings":"AAAA;;;;;;;;;;;;AACA,IAAIA,SAAS,GAAI,QAAQ,KAAKA,SAAd,IAA4B,UAAUC,OAAV,EAAmBC,UAAnB,EAA+BC,CAA/B,EAAkCC,SAAlC,EAA6C;AACrF,WAASC,KAAT,CAAeC,KAAf,EAAsB;AAAE,WAAOA,KAAK,YAAYH,CAAjB,GAAqBG,KAArB,GAA6B,IAAIH,CAAJ,CAAM,UAAUI,OAAV,EAAmB;AAAEA,MAAAA,OAAO,CAACD,KAAD,CAAP;AAAiB,KAA5C,CAApC;AAAoF;;AAC5G,SAAO,KAAKH,CAAC,KAAKA,CAAC,GAAGK,OAAT,CAAN,EAAyB,UAAUD,OAAV,EAAmBE,MAAnB,EAA2B;AACvD,aAASC,SAAT,CAAmBJ,KAAnB,EAA0B;AAAE,UAAI;AAAEK,QAAAA,IAAI,CAACP,SAAS,CAACQ,IAAV,CAAeN,KAAf,CAAD,CAAJ;AAA8B,OAApC,CAAqC,OAAOO,CAAP,EAAU;AAAEJ,QAAAA,MAAM,CAACI,CAAD,CAAN;AAAY;AAAE;;AAC3F,aAASC,QAAT,CAAkBR,KAAlB,EAAyB;AAAE,UAAI;AAAEK,QAAAA,IAAI,CAACP,SAAS,CAAC,OAAD,CAAT,CAAmBE,KAAnB,CAAD,CAAJ;AAAkC,OAAxC,CAAyC,OAAOO,CAAP,EAAU;AAAEJ,QAAAA,MAAM,CAACI,CAAD,CAAN;AAAY;AAAE;;AAC9F,aAASF,IAAT,CAAcI,MAAd,EAAsB;AAAEA,MAAAA,MAAM,CAACC,IAAP,GAAcT,OAAO,CAACQ,MAAM,CAACT,KAAR,CAArB,GAAsCD,KAAK,CAACU,MAAM,CAACT,KAAR,CAAL,CAAoBW,IAApB,CAAyBP,SAAzB,EAAoCI,QAApC,CAAtC;AAAsF;;AAC9GH,IAAAA,IAAI,CAAC,CAACP,SAAS,GAAGA,SAAS,CAACc,KAAV,CAAgBjB,OAAhB,EAAyBC,UAAU,IAAI,EAAvC,CAAb,EAAyDU,IAAzD,EAAD,CAAJ;AACH,GALM,CAAP;AAMH,CARD;;AASA,IAAIO,eAAe,GAAI,QAAQ,KAAKA,eAAd,IAAkC,UAAUC,GAAV,EAAe;AACnE,SAAQA,GAAG,IAAIA,GAAG,CAACC,UAAZ,GAA0BD,GAA1B,GAAgC;AAAE,eAAWA;AAAb,GAAvC;AACH,CAFD;;AAGA,IAAIE,YAAY,GAAI,QAAQ,KAAKA,YAAd,IAA+B,UAAUF,GAAV,EAAe;AAC7D,MAAIA,GAAG,IAAIA,GAAG,CAACC,UAAf,EAA2B,OAAOD,GAAP;AAC3B,MAAIL,MAAM,GAAG,EAAb;AACA,MAAIK,GAAG,IAAI,IAAX,EAAiB,KAAK,IAAIG,CAAT,IAAcH,GAAd;AAAmB,QAAII,MAAM,CAACC,cAAP,CAAsBC,IAAtB,CAA2BN,GAA3B,EAAgCG,CAAhC,CAAJ,EAAwCR,MAAM,CAACQ,CAAD,CAAN,GAAYH,GAAG,CAACG,CAAD,CAAf;AAA3D;AACjBR,EAAAA,MAAM,CAAC,SAAD,CAAN,GAAoBK,GAApB;AACA,SAAOL,MAAP;AACH,CAND;;AAOAS,MAAM,CAACG,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEtB,EAAAA,KAAK,EAAE;AAAT,CAA7C;;AACA,IAAMuB,WAAW,GAAGV,eAAe,CAACW,OAAO,CAAC,iBAAD,CAAR,CAAnC;;AACA,IAAMC,OAAO,GAAGT,YAAY,CAACQ,OAAO,CAAC,iBAAD,CAAR,CAA5B;;AACA,IAAME,OAAO,GAAGb,eAAe,CAACW,OAAO,CAAC,OAAD,CAAR,CAA/B;;AACA,IAAMG,sBAAsB,GAAGd,eAAe,CAACW,OAAO,CAAC,sBAAD,CAAR,CAA9C;;AACA,IAAMI,eAAe,GAAGf,eAAe,CAACW,OAAO,CAAC,iDAAD,CAAR,CAAvC;;AACA,IAAMK,KAAK,GAAGhB,eAAe,CAACW,OAAO,CAAC,uCAAD,CAAR,CAA7B;;AACA,IAAMM,eAAe,GAAGjB,eAAe,CAACW,OAAO,CAAC,iDAAD,CAAR,CAAvC;;AACA,IAAMO,SAAS,GAAGlB,eAAe,CAACW,OAAO,CAAC,2CAAD,CAAR,CAAjC;;AACA,IAAMQ,MAAM,GAAGnB,eAAe,CAACW,OAAO,CAAC,MAAD,CAAR,CAA9B;;AACA,IAAMS,SAAS,GAAGjB,YAAY,CAACQ,OAAO,CAAC,YAAD,CAAR,CAA9B;;AACA,IAAMU,cAAc,GAAGrB,eAAe,CAACW,OAAO,CAAC,gBAAD,CAAR,CAAtC;;AACA,IAAMW,OAAO,GAAGX,OAAO,CAAC,SAAD,CAAvB;;IACMY,iB;;;;;AACF,6BAAYC,MAAZ,EAAoB;AAAA;;AAAA;;AAChB;AACA,UAAKC,WAAL,GAAmB,IAAnB;AACA,UAAKC,UAAL,GAAkB,EAAlB;AACA,UAAKC,iBAAL,GAAyB,IAAzB;AACA,UAAKC,MAAL,GAAc,EAAd;AACA,UAAKC,aAAL,GAAqB,IAArB;AACA,UAAKC,OAAL,GAAe,EAAf;AACA,UAAKC,cAAL,GAAsB,IAAtB;AACA,UAAKC,YAAL,GAAoB,EAApB;AACA,UAAKC,mBAAL,GAA2B,IAA3B;AACA,QAAIC,eAAe,GAAG,IAAtB;;AACA,QAAIV,MAAM,YAAYH,cAAc,CAACc,OAArC,EAA8C;AAC1CD,MAAAA,eAAe,GAAGV,MAAlB;AACAA,MAAAA,MAAM,GAAGU,eAAe,CAACV,MAAzB;AACH;;AACD,UAAKA,MAAL,GAAcA,MAAM,IAAI,EAAxB;AACA,UAAKY,SAAL,GAAiBF,eAAe,IAAI,IAAIb,cAAc,CAACc,OAAnB,CAA2B,MAAKX,MAAhC,CAApC;;AACA,UAAKa,eAAL;;AACA,UAAKZ,WAAL,GAAmB,IAAnB;AAnBgB;AAoBnB;;;;WACD,2BAAkB;AACd,aAAO5C,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,wCAAuB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACnC,uBAAM,KAAKuD,SAAL,CAAeE,SAAf,EAAN;;AADmC;AAAA,gCAErB,KAAKd,MAAL,CAAYe,MAFS;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAEE,uBAAM,KAAKH,SAAL,CAAeI,SAAf,EAAN;;AAFF;AAAA;;AAAA;AAEnC,qBAAKD,MAF8B;AAG7BE,gBAAAA,eAH6B,GAGX,GAHW;AAI7BC,gBAAAA,iBAJ6B,GAIT,IAAI3B,eAAe,CAACoB,OAApB,CAA4B;AAClDQ,kBAAAA,WAAW,EAAE,qBAACC,EAAD;AAAA,2BAAQ/D,SAAS,CAAC,MAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,wCAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAChC,qCAAM,KAAKuD,SAAL,CAAeS,eAAf,EAAN;;AADgC;AAC3CC,8BAAAA,QAD2C;;AAAA,kCAE5CA,QAF4C;AAAA;AAAA;AAAA;;AAG7C,kCAAIF,EAAJ,EAAQ;AACJA,gCAAAA,EAAE,CAAC,IAAD,EAAO,EAAP,CAAF;AACH;;AAL4C,+DAMtC,EANsC;;AAAA;AAAA;AAQ1B,qCAAM,KAAKR,SAAL,CAAeW,iBAAf,EAAN;;AAR0B;AAQ3CC,8BAAAA,cAR2C;;AAAA,kCAS5CA,cAT4C;AAAA;AAAA;AAAA;;AAU7C,kCAAIJ,EAAJ,EAAQ;AACJA,gCAAAA,EAAE,CAAC,IAAD,EAAO,EAAP,CAAF;AACH;;AAZ4C,+DAatC,EAbsC;;AAAA;AAejD,kCAAIA,EAAJ,EAAQ;AACJA,gCAAAA,EAAE,CAAC,IAAD,EAAO,CAACI,cAAD,CAAP,CAAF;AACH;;AAjBgD,+DAkB1C,CAACA,cAAD,CAlB0C;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAvB,EAAjB;AAAA,mBADqC;AAqBlDC,kBAAAA,kBAAkB,EAAE,4BAACC,QAAD,EAAWN,EAAX;AAAA,2BAAkB/D,SAAS,CAAC,MAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,wCAAuB;AAAA;AAAA;AAAA;AAAA;AAClE,kCAAI+D,EAAJ,EAAQ;AACJA,gCAAAA,EAAE,CAAC,IAAD,EAAO,IAAP,CAAF;AACH;;AAHiE,gEAI3D,IAJ2D;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAvB,EAA3B;AAAA,mBArB8B;AA2BlDO,kBAAAA,cAAc,EAAE,wBAACC,SAAD,EAAYR,EAAZ;AAAA,2BAAmB/D,SAAS,CAAC,MAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,wCAAuB;AAAA;AAAA;AAAA;AAAA;AAC/D,kCAAI+D,EAAJ,EAAQ;AACJA,gCAAAA,EAAE,CAAC,IAAD,EAAO,IAAP,CAAF;AACH;;AAH8D,gEAIxD,IAJwD;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAvB,EAA5B;AAAA,mBA3BkC;AAiClDS,kBAAAA,mBAAmB,EAAE,6BAACD,SAAD,EAAYR,EAAZ;AAAA,2BAAmB/D,SAAS,CAAC,MAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,wCAAuB;AAAA;AAAA;AAAA;AAAA;AACpE,kCAAI+D,EAAJ,EAAQ;AACJA,gCAAAA,EAAE,CAAC,IAAD,EAAO,IAAP,CAAF;AACH;;AAHmE,gEAI7D,IAJ6D;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAvB,EAA5B;AAAA,mBAjC6B;AAuClDU,kBAAAA,WAAW,EAAE,qBAACF,SAAD,EAAYR,EAAZ;AAAA,2BAAmB/D,SAAS,CAAC,MAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,wCAAuB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACxD0E,8BAAAA,UADwD,GAC3CH,SAD2C;;AAE5D,kCAAI;AACAG,gCAAAA,UAAU,GAAGC,IAAI,CAACC,SAAL,CAAeL,SAAf,CAAb;AACH,+BAFD,CAGA,OAAOM,GAAP,EAAY,CACR;AACH,+BAP2D,CAQ5D;;;AACAC,8BAAAA,YAAY,CAAC,KAAK5B,cAAN,CAAZ;;AAT4D,oCAUxD,KAAKD,OAAL,KAAiByB,UAVuC;AAAA;AAAA;AAAA;;AAAA,gEAWjD,KAAKK,qBAAL,CAA2BR,SAA3B,EAAsCR,EAAtC,CAXiD;;AAAA;AAa5D;AACMiB,8BAAAA,OAdsD,GAc5C,CAAC,KAAK/B,OAdsC;AAe5D,mCAAKA,OAAL,GAAeyB,UAAf;AACA,mCAAKxB,cAAL,GAAsB+B,UAAU,CAAC,YAAM;AACnC,gCAAA,MAAI,CAAChC,OAAL,GAAe,EAAf;AACH,+BAF+B,EAE7BW,eAF6B,CAAhC;;AAhB4D,mCAmBxDoB,OAnBwD;AAAA;AAAA;AAAA;;AAAA,gEAoBjD,KAAKD,qBAAL,CAA2BR,SAA3B,EAAsCR,EAAtC,CApBiD;;AAAA;AAAA,gEAsBrD,KAAKmB,YAAL,CAAkBX,SAAlB,EAA6BR,EAA7B,CAtBqD;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAvB,EAA5B;AAAA,mBAvCqC;AA+DlDoB,kBAAAA,eAAe,EAAE,yBAACd,QAAD,EAAWN,EAAX;AAAA,2BAAkB/D,SAAS,CAAC,MAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,wCAAuB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACzDoF,8BAAAA,CADyD,GACrD5D,MAAM,CAAC6D,MAAP,CAAc,EAAd,EAAkBhB,QAAlB,CADqD;AAE/De,8BAAAA,CAAC,CAACE,KAAF,GAAU,IAAV,CAF+D,CAG/D;;AACMC,8BAAAA,SAJyD,GAI7CZ,IAAI,CAACC,SAAL,CAAeQ,CAAf,CAJ6C;AAK/DN,8BAAAA,YAAY,CAAC,KAAKhC,iBAAN,CAAZ;;AAL+D,oCAM3D,KAAKD,UAAL,KAAoB0C,SANuC;AAAA;AAAA;AAAA;;AAAA,gEAOpD,KAAKC,yBAAL,CAA+BnB,QAA/B,EAAyCN,EAAzC,CAPoD;;AAAA;AAS/D;AACMiB,8BAAAA,OAVyD,GAU/C,CAAC,KAAKnC,UAVyC;AAW/D,mCAAKA,UAAL,GAAkB0C,SAAlB;AACA,mCAAKzC,iBAAL,GAAyBmC,UAAU,CAAC,YAAM;AACtC,gCAAA,MAAI,CAACpC,UAAL,GAAkB,EAAlB;AACH,+BAFkC,EAEhCe,eAFgC,CAAnC;;AAZ+D,mCAe3DoB,OAf2D;AAAA;AAAA;AAAA;;AAAA,gEAgBpD,KAAKQ,yBAAL,CAA+BnB,QAA/B,EAAyCN,EAAzC,CAhBoD;;AAAA;AAAA,gEAkBxD,KAAK0B,gBAAL,CAAsBpB,QAAtB,EAAgCN,EAAhC,CAlBwD;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAvB,EAA3B;AAAA,mBA/DiC;AAmFlD2B,kBAAAA,sBAAsB,EAAE,gCAACrB,QAAD,EAAWN,EAAX;AAAA,2BAAkB/D,SAAS,CAAC,MAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,wCAAuB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAChEoF,8BAAAA,CADgE,GAC5D5D,MAAM,CAAC6D,MAAP,CAAc,EAAd,EAAkBhB,QAAlB,CAD4D;AAEtEe,8BAAAA,CAAC,CAACE,KAAF,GAAU,IAAV,CAFsE,CAGtE;;AACMC,8BAAAA,SAJgE,GAIpDZ,IAAI,CAACC,SAAL,CAAeQ,CAAf,CAJoD;AAKtEN,8BAAAA,YAAY,CAAC,KAAK9B,aAAN,CAAZ;;AALsE,oCAMlE,KAAKD,MAAL,KAAgBwC,SANkD;AAAA;AAAA;AAAA;;AAAA,gEAO3D,KAAKI,gCAAL,CAAsCtB,QAAtC,EAAgDN,EAAhD,CAP2D;;AAAA;AAStE;AACMiB,8BAAAA,OAVgE,GAUtD,CAAC,KAAKjC,MAVgD;AAWtE,mCAAKA,MAAL,GAAcwC,SAAd;AACA,mCAAKvC,aAAL,GAAqBiC,UAAU,CAAC,YAAM;AAClC,gCAAA,MAAI,CAAClC,MAAL,GAAc,EAAd;AACH,+BAF8B,EAE5Ba,eAF4B,CAA/B;;AAZsE,mCAelEoB,OAfkE;AAAA;AAAA;AAAA;;AAAA,gEAgB3D,KAAKW,gCAAL,CAAsCtB,QAAtC,EAAgDN,EAAhD,CAhB2D;;AAAA;AAAA,gEAkB/DF,iBAAiB,CAAC+B,UAAlB,CAA6BvB,QAA7B,EAAuCN,EAAvC,CAlB+D;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAvB,EAA3B;AAAA,mBAnF0B;AAuGlD8B,kBAAAA,kBAAkB,EAAE,4BAACxB,QAAD,EAAWN,EAAX;AAAA,2BAAkB/D,SAAS,CAAC,MAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,wCAAuB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAC5DoF,8BAAAA,CAD4D,GACxD5D,MAAM,CAAC6D,MAAP,CAAc,EAAd,EAAkBhB,QAAlB,CADwD;AAElEe,8BAAAA,CAAC,CAACE,KAAF,GAAU,IAAV,CAFkE,CAGlE;;AACMC,8BAAAA,SAJ4D,GAIhDZ,IAAI,CAACC,SAAL,CAAeQ,CAAf,CAJgD;AAKlEN,8BAAAA,YAAY,CAAC,KAAK9B,aAAN,CAAZ;;AALkE,oCAM9D,KAAKD,MAAL,KAAgBwC,SAN8C;AAAA;AAAA;AAAA;;AAAA,gEAOvD,KAAKO,4BAAL,CAAkCzB,QAAlC,EAA4CN,EAA5C,CAPuD;;AAAA;AASlE;AACMiB,8BAAAA,OAV4D,GAUlD,CAAC,KAAKjC,MAV4C;AAWlE,mCAAKA,MAAL,GAAcwC,SAAd;AACA,mCAAKvC,aAAL,GAAqBiC,UAAU,CAAC,YAAM;AAClC,gCAAA,MAAI,CAAClC,MAAL,GAAc,EAAd;AACH,+BAF8B,EAE5Ba,eAF4B,CAA/B;;AAZkE,mCAe9DoB,OAf8D;AAAA;AAAA;AAAA;;AAAA,gEAgBvD,KAAKc,4BAAL,CAAkCzB,QAAlC,EAA4CN,EAA5C,CAhBuD;;AAAA;AAAA,gEAkB3D,KAAKgC,mBAAL,CAAyB1B,QAAzB,EAAmCN,EAAnC,CAlB2D;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAvB,EAA3B;AAAA,mBAvG8B;AA2HlD6B,kBAAAA,UAAU,EAAE,oBAACvB,QAAD,EAAWN,EAAX;AAAA,2BAAkB/D,SAAS,CAAC,MAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,wCAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAErC,qCAAM,KAAKyF,gBAAL,CAAsBpB,QAAtB,CAAN;;AAFqC;AAEhD2B,8BAAAA,QAFgD;AAGhDC,8BAAAA,GAHgD,GAG1C;AAAEC,gCAAAA,GAAG,EAAEF,QAAP;AAAiBG,gCAAAA,EAAE,EAAE9B;AAArB,+BAH0C;;AAItD,kCAAIN,EAAJ,EAAQ;AACJA,gCAAAA,EAAE,CAAC,IAAD,EAAOkC,GAAP,CAAF;AACH;;AANqD,gEAO/CA,GAP+C;;AAAA;AAAA;AAAA;;AAUtD,kCAAIlC,EAAJ,EAAQ;AACJA,gCAAAA,EAAE,cAAF;AACH;;AAZqD;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAvB,EAA3B;AAAA,mBA3HsC;AA2IlDqC,kBAAAA,sBAAsB,EAAE,gCAAC7B,SAAD,EAAYR,EAAZ;AAAA,2BAAmB/D,SAAS,CAAC,MAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,wCAAuB;AAAA;AAAA;AAAA;AAAA;AACvE,kCAAI+D,EAAJ,EAAQ;AACJA,gCAAAA,EAAE,CAAC,IAAD,EAAO,IAAP,CAAF;AACH;;AAHsE,iEAIhE,IAJgE;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAvB,EAA5B;AAAA,mBA3I0B;AAiJlDsC,kBAAAA,mBAAmB,EAAE,6BAAC9B,SAAD,EAAYR,EAAZ;AAAA,2BAAmB/D,SAAS,CAAC,MAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,wCAAuB;AAAA;AAAA;AAAA;AAAA;AACpEuE,8BAAAA,SAAS,CAAC+B,QAAV,GAAqB,IAArB;AADoE,iEAE7DzC,iBAAiB,CAACY,WAAlB,CAA8BF,SAA9B,EAAyCR,EAAzC,CAF6D;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAvB,EAA5B;AAAA,mBAjJ6B;AAqJlDwC,kBAAAA,gBAAgB,EAAE,0BAAChC,SAAD,EAAYR,EAAZ;AAAA,2BAAmB/D,SAAS,CAAC,MAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,wCAAuB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAC7DwG,8BAAAA,eAD6D,GAC3CjC,SAD2C;;AAEjE,kCAAI;AACAiC,gCAAAA,eAAe,GAAG7B,IAAI,CAACC,SAAL,CAAeL,SAAf,CAAlB;AACH,+BAFD,CAGA,OAAOM,GAAP,EAAY,CACR;AACH,+BAPgE,CAQjE;;;AACAC,8BAAAA,YAAY,CAAC,KAAK1B,mBAAN,CAAZ;;AATiE,oCAU7D,KAAKD,YAAL,KAAsBqD,eAVuC;AAAA;AAAA;AAAA;;AAAA,iEAWtD,KAAKC,0BAAL,CAAgClC,SAAhC,EAA2CR,EAA3C,CAXsD;;AAAA;AAajE;AACMiB,8BAAAA,OAd2D,GAcjD,CAAC,KAAK7B,YAd2C;AAejE,mCAAKA,YAAL,GAAoBqD,eAApB;AACA,mCAAKpD,mBAAL,GAA2B6B,UAAU,CAAC,YAAM;AACxC,gCAAA,MAAI,CAAC9B,YAAL,GAAoB,EAApB;AACH,+BAFoC,EAElCS,eAFkC,CAArC;;AAhBiE,mCAmB7DoB,OAnB6D;AAAA;AAAA;AAAA;;AAAA,iEAoBtD,KAAKyB,0BAAL,CAAgClC,SAAhC,EAA2CR,EAA3C,CApBsD;;AAAA;AAAA,iEAsB1D,KAAK2C,iBAAL,CAAuBnC,SAAvB,EAAkCR,EAAlC,CAtB0D;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAvB,EAA5B;AAAA;AArJgC,iBAA5B,CAJS;AAkLnC,qBAAKF,iBAAL,GAAyBA,iBAAzB;;AACA,qBAAKkC,mBAAL,GAA2B,UAAC1B,QAAD,EAAWN,EAAX;AAAA,yBAAkB/D,SAAS,CAAC,MAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,wCAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAE3C,mCAAMsC,MAAM,CAACgB,OAAP,CAAeO,iBAAiB,CAACsB,eAAlB,CAAkCwB,IAAlC,CAAuC9C,iBAAvC,CAAf,EAA0EQ,QAA1E,CAAN;;AAF2C;AAE/DuC,4BAAAA,iBAF+D;AAG/DC,4BAAAA,eAH+D,GAG7CtE,SAAS,CAACuE,IAAV,CAAeF,iBAAf,CAH6C;;AAIrE,gCAAI7C,EAAJ,EAAQ;AACJA,8BAAAA,EAAE,CAAC,IAAD,EAAO8C,eAAP,CAAF;AACH;;AANoE,+DAO9DA,eAP8D;;AAAA;AAAA;AAAA;;AAAA,iCAUjE9C,EAViE;AAAA;AAAA;AAAA;;AAWjEA,4BAAAA,EAAE,eAAF;AAXiE;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAvB,EAA3B;AAAA,iBAA3B;;AAiBA,qBAAK4B,gCAAL,GAAwClD,OAAO,CAACsE,QAAR,CAAiB,UAAC1C,QAAD,EAAWN,EAAX;AAAA,yBAAkB/D,SAAS,CAAC,MAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,wCAAuB;AAAA;AAAA;AAAA;AAAA;AAAA,+DAChG6D,iBAAiB,CAAC+B,UAAlB,CAA6BvB,QAA7B,EAAuCN,EAAvC,CADgG;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAvB,EAA3B;AAAA,iBAAjB,EAEpCH,eAFoC,CAAxC;AAGA,qBAAKkC,4BAAL,GAAoCrD,OAAO,CAACsE,QAAR,CAAiB,UAAC1C,QAAD,EAAWN,EAAX;AAAA,yBAAkB/D,SAAS,CAAC,MAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,wCAAuB;AAAA;AAAA;AAAA;AAAA;AAAA,+DAC5F,KAAK+F,mBAAL,CAAyB1B,QAAzB,EAAmCN,EAAnC,CAD4F;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAvB,EAA3B;AAAA,iBAAjB,EAEhCH,eAFgC,CAApC;;AAGA,qBAAKsB,YAAL,GAAoB,UAACX,SAAD,EAAYR,EAAZ;AAAA,yBAAmB/D,SAAS,CAAC,MAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,wCAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAE7C,mCAAM,KAAKuD,SAAL,CAAekB,WAAf,CAA2BF,SAAS,CAACyC,IAArC,EAA2C;AAC/DV,8BAAAA,QAAQ,EAAE/B,SAAS,CAAC+B,QAD2C;AAE/DW,8BAAAA,oBAAoB,EAAE;AAFyC,6BAA3C,CAAN;;AAF6C;AAEzDC,4BAAAA,SAFyD;;AAM/D,gCAAInD,EAAJ,EAAQ;AACJA,8BAAAA,EAAE,CAAC,IAAD,EAAOmD,SAAP,CAAF;AACH;;AAR8D,+DASxDA,SATwD;;AAAA;AAAA;AAAA;;AAY/D,gCAAInD,EAAJ,EAAQ;AACJA,8BAAAA,EAAE,eAAF;AACH;;AAd8D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAvB,EAA5B;AAAA,iBAApB;;AAiBA,qBAAKgB,qBAAL,GAA6BtC,OAAO,CAACsE,QAAR,CAAiB,UAACxC,SAAD,EAAYR,EAAZ;AAAA,yBAAmB/D,SAAS,CAAC,MAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,wCAAuB;AAAA;AAAA;AAAA;AAAA;AAAA,+DACtF,KAAKkF,YAAL,CAAkBX,SAAlB,EAA6BR,EAA7B,CADsF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAvB,EAA5B;AAAA,iBAAjB,EAEzBH,eAFyB,CAA7B;;AAGA,qBAAK8C,iBAAL,GAAyB,UAACnC,SAAD,EAAYR,EAAZ;AAAA,yBAAmB/D,SAAS,CAAC,MAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,wCAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAElD,mCAAM,KAAKuD,SAAL,CAAekB,WAAf,CAA2BF,SAAS,CAACyC,IAArC,EAA2C;AAC/DC,8BAAAA,oBAAoB,EAAE;AADyC,6BAA3C,CAAN;;AAFkD;AAE9DC,4BAAAA,SAF8D;;AAKpE,gCAAInD,EAAJ,EAAQ;AACJA,8BAAAA,EAAE,CAAC,IAAD,EAAOmD,SAAP,CAAF;AACH;;AAPmE,+DAQ7DA,SAR6D;;AAAA;AAAA;AAAA;;AAWpE,gCAAInD,EAAJ,EAAQ;AACJA,8BAAAA,EAAE,eAAF;AACH;;AAbmE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAvB,EAA5B;AAAA,iBAAzB;;AAgBA,qBAAK0C,0BAAL,GAAkChE,OAAO,CAACsE,QAAR,CAAiB,UAACxC,SAAD,EAAYR,EAAZ;AAAA,yBAAmB/D,SAAS,CAAC,MAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,wCAAuB;AAAA;AAAA;AAAA;AAAA;AAAA,+DAC3F,KAAK0G,iBAAL,CAAuBnC,SAAvB,EAAkCR,EAAlC,CAD2F;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAvB,EAA5B;AAAA,iBAAjB,EAE9BH,eAF8B,CAAlC;;AAGA,qBAAK6B,gBAAL,GAAwB,UAACpB,QAAD,EAAWN,EAAX;AAAA,yBAAkB/D,SAAS,CAAC,MAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,wCAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEtD,mCAAM,KAAKuD,SAAL,CAAe4B,eAAf,CAA+Bd,QAA/B,CAAN;;AAFsD;AAE5D4B,4BAAAA,GAF4D;;AAAA,gCAG7DA,GAH6D;AAAA;AAAA;AAAA;;AAAA,kCAIxD,IAAIkB,KAAJ,CAAU,2BAAV,CAJwD;;AAAA;AAMlE,gCAAIpD,EAAJ,EAAQ;AACJA,8BAAAA,EAAE,CAAC,IAAD,EAAOkC,GAAG,CAACmB,qBAAX,CAAF;AACH;;AARiE,+DAS3DnB,GAAG,CAACmB,qBATuD;;AAAA;AAAA;AAAA;AAYlErD,4BAAAA,EAAE,eAAF;;AAZkE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAvB,EAA3B;AAAA,iBAAxB;;AAeA,qBAAKyB,yBAAL,GAAiC/C,OAAO,CAACsE,QAAR,CAAiB,UAAC1C,QAAD,EAAWN,EAAX;AAAA,yBAAkB/D,SAAS,CAAC,MAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,wCAAuB;AAAA;AAAA;AAAA;AAAA;AAAA,+DACzF,KAAKyF,gBAAL,CAAsBpB,QAAtB,EAAgCN,EAAhC,CADyF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAvB,EAA3B;AAAA,iBAAjB,EAE7BH,eAF6B,CAAjC,CAhQmC,CAmQnC;;AACA,qBAAKyD,UAAL,GAAkB,KAAKC,SAAvB;;AACA,qBAAKA,SAAL,GAAiB,UAACC,OAAD,EAAUC,QAAV;AAAA,yBAAuBxH,SAAS,CAAC,MAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,wCAAuB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,+DAC7D,IAAIQ,OAAJ,CAAY,UAACD,OAAD,EAAUE,MAAV,EAAqB;AACpC,kCAAI,CAAC+G,QAAL,EAAe;AACXA,gCAAAA,QAAQ,GAAG,kBAAC3C,GAAD,EAAM4C,QAAN,EAAmB;AAC1B,sCAAI5C,GAAJ,EAAS;AACLpE,oCAAAA,MAAM,CAACoE,GAAD,CAAN;AACA;AACH;;AACDtE,kCAAAA,OAAO,CAACkH,QAAD,CAAP;AACH,iCAND;AAOH;;AACD,8BAAA,MAAI,CAACJ,UAAL,CAAgBE,OAAhB,EAAyBC,QAAzB;AACH,6BAXM,CAD6D;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAvB,EAAhC;AAAA,iBAAjB;;AAcA,qBAAKE,IAAL,GAAY,UAACH,OAAD,EAAUC,QAAV,EAAuB;AAC/B;AACA,sBAAI,OAAOD,OAAP,KAAmB,QAAvB,EAAiC;AAC7B,2BAAO,IAAI/G,OAAJ,CAAY,UAACD,OAAD,EAAUE,MAAV,EAAqB;AACpC,sBAAA,MAAI,CAAC6G,SAAL,CAAe;AACXK,wBAAAA,OAAO,EAAE,KADE;AAEXC,wBAAAA,EAAE,EAAE,CAFO;AAGXC,wBAAAA,MAAM,EAAEN,OAHG;AAIXO,wBAAAA,MAAM,EAAEN,QAAQ,IAAI;AAJT,uBAAf,EAKG,UAACO,KAAD,EAAQN,QAAR,EAAqB;AACpB,4BAAIM,KAAJ,EAAW;AACPtH,0BAAAA,MAAM,CAACsH,KAAD,CAAN;AACH,yBAFD,MAGK;AACDxH,0BAAAA,OAAO,CAACkH,QAAQ,CAAC1G,MAAV,CAAP;AACH;AACJ,uBAZD;AAaH,qBAdM,CAAP;AAeH,mBAlB8B,CAmB/B;;;AACA,sBAAIyG,QAAJ,EAAc;AACV,oBAAA,MAAI,CAACF,SAAL,CAAeC,OAAf,EAAwBC,QAAxB;;AACA;AACH;;AACD,sBAAIzG,MAAM,GAAG,IAAb;;AACA,0BAAQwG,OAAO,CAACM,MAAhB;AACI,yBAAK,qBAAL;AACI,sBAAA,MAAI,CAACP,SAAL,CAAeC,OAAf,EAAwB,YAAM,CAC1B;AACH,uBAFD;;AAGAxG,sBAAAA,MAAM,GAAG,IAAT;AACA;;AACJ;AACI,0BAAIiH,OAAO,iFAA0ET,OAAO,CAACM,MAAlF,mCAAX;AACA,4BAAM,IAAIV,KAAJ,CAAUa,OAAV,CAAN;AATR;;AAWA,yBAAO;AACHJ,oBAAAA,EAAE,EAAEL,OAAO,CAACK,EADT;AAEHD,oBAAAA,OAAO,EAAEJ,OAAO,CAACI,OAFd;AAGH5G,oBAAAA,MAAM,EAAEA;AAHL,mBAAP;AAKH,iBAzCD;;AA0CA8C,gBAAAA,iBAAiB,CAACoE,aAAlB,GAAkC,UAACV,OAAD,EAAU3G,IAAV,EAAgBsH,GAAhB,EAAwB;AACtD,sBAAMC,IAAI,GAAGtE,iBAAb;AACAsE,kBAAAA,IAAI,CAACC,eAAL,GAAuB,EAAvB;AACAD,kBAAAA,IAAI,CAACE,mBAAL,GAA2B,CAA3B,CAHsD,CAItD;AACA;;AACA,sBAAIhE,QAAJ;AACA,sBAAIE,SAAJ;AACA,sBAAI+D,WAAJ;AACA,sBAAIN,OAAJ;AACA,sBAAIO,OAAJ;AACA,sBAAMV,MAAM,GAAGN,OAAO,CAACM,MAAvB;;AACA,sBAAIA,MAAM,IAAIA,MAAM,CAACW,UAAP,CAAkB,QAAlB,CAAd,EAA2C;AACvC,oBAAA,MAAI,CAACjF,SAAL,CAAekF,gBAAf,GAAkCf,IAAlC,CAAuCG,MAAvC,EAA+CN,OAAO,CAACO,MAAvD,EACK7G,IADL,CACU,UAAAF,MAAM;AAAA,6BAAImH,GAAG,CAAC,IAAD,EAAOnH,MAAP,CAAP;AAAA,qBADhB,EAEK2H,KAFL,CAEW,UAAA7D,GAAG;AAAA,6BAAIqD,GAAG,CAACrD,GAAD,CAAP;AAAA,qBAFd;;AAGA;AACH;;AACD,0BAAQgD,MAAR;AACI,yBAAK,cAAL;AAAqB;AACjB;AACAM,wBAAAA,IAAI,CAACrE,WAAL,CAAiB,UAACe,GAAD,EAAM8D,QAAN,EAAmB;AAChC,8BAAI9D,GAAJ,EACI,OAAOqD,GAAG,CAACrD,GAAD,CAAV;AACJ,8BAAI9D,MAAM,GAAG4H,QAAQ,CAAC,CAAD,CAAR,IAAe,IAA5B;AACAT,0BAAAA,GAAG,CAAC,IAAD,EAAOnH,MAAP,CAAH;AACH,yBALD;AAMA;AACH;;AACD,yBAAK,cAAL;AAAqB;AACjB;AACAoH,wBAAAA,IAAI,CAACrE,WAAL,CAAiB,UAACe,GAAD,EAAM8D,QAAN,EAAmB;AAChC,8BAAI9D,GAAJ,EACI,OAAOqD,GAAG,CAACrD,GAAD,CAAV;AACJqD,0BAAAA,GAAG,CAAC,IAAD,EAAOS,QAAP,CAAH;AACH,yBAJD;AAKA;AACH;;AACD,yBAAK,qBAAL;AAA4B;AACxBtE,wBAAAA,QAAQ,GAAGkD,OAAO,CAACO,MAAR,CAAe,CAAf,CAAX;AACAjG,wBAAAA,WAAW,CAACyB,OAAZ,CAAoB,CAChB,UAACS,EAAD;AAAA,iCAAQoE,IAAI,CAACtC,kBAAL,CAAwBxB,QAAxB,EAAkCN,EAAlC,CAAR;AAAA,yBADgB,CAApB,EAEGmE,GAFH;AAGA;AACH;;AACD,yBAAK,qBAAL;AAA4B;AACxB7D,wBAAAA,QAAQ,GAAGkD,OAAO,CAACO,MAAR,CAAe,CAAf,CAAX;AACAjG,wBAAAA,WAAW,CAACyB,OAAZ,CAAoB,CAChB,UAACS,EAAD;AAAA,iCAAQoE,IAAI,CAACzC,sBAAL,CAA4BrB,QAA5B,EAAsCN,EAAtC,CAAR;AAAA,yBADgB,CAApB,EAEGmE,GAFH;AAGA;AACH;;AACD,yBAAK,UAAL;AAAiB;AACb;AACAK,wBAAAA,OAAO,GAAGhB,OAAO,CAACO,MAAR,CAAe,CAAf,CAAV;AACAE,wBAAAA,OAAO,GAAGT,OAAO,CAACO,MAAR,CAAe,CAAf,CAAV,CAHa,CAIb;AACA;;AACAQ,wBAAAA,WAAW,GAAGf,OAAO,CAACO,MAAR,CAAe,CAAf,KAAqB,EAAnC;AACAvD,wBAAAA,SAAS,GAAGvC,OAAO,CAACsB,OAAR,CAAgBgF,WAAhB,EAA6B;AACrCM,0BAAAA,IAAI,EAAEL,OAD+B;AAErCvB,0BAAAA,IAAI,EAAEgB;AAF+B,yBAA7B,CAAZ;AAIAnG,wBAAAA,WAAW,CAACyB,OAAZ,CAAoB,CAChB,UAACS,EAAD;AAAA,iCAAQoE,IAAI,CAACU,cAAL,CAAoBtE,SAApB,EAA+BR,EAA/B,CAAR;AAAA,yBADgB,CAApB,EAEGmE,GAFH;AAGA;AACH;;AACD,yBAAK,eAAL;AAAsB;AAClB,+BAAQ,YAAM;AACV;AACA,8BAAMY,KAAK,GAAGvB,OAAO,CAACO,MAAR,CAAe,CAAf,CAAd;AACA,8BAAMiB,MAAM,GAAGxB,OAAO,CAACO,MAAR,CAAe,CAAf,CAAf,CAHU,CAIV;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,8BAAIkB,aAAa,CAACD,MAAD,CAAb,IAAyBE,gBAAgB,CAACH,KAAD,CAA7C,EAAsD;AAClD,gCAAII,OAAO,yDAAX;AACAA,4BAAAA,OAAO,mEAAP;AACAA,4BAAAA,OAAO,4CAAP;AACAA,4BAAAA,OAAO,uEAAP;AACAC,4BAAAA,OAAO,CAACC,IAAR,CAAaF,OAAb;AACAX,4BAAAA,OAAO,GAAGhB,OAAO,CAACO,MAAR,CAAe,CAAf,CAAV;AACAE,4BAAAA,OAAO,GAAGT,OAAO,CAACO,MAAR,CAAe,CAAf,CAAV;AACH,2BARD,MASK;AACDE,4BAAAA,OAAO,GAAGT,OAAO,CAACO,MAAR,CAAe,CAAf,CAAV;AACAS,4BAAAA,OAAO,GAAGhB,OAAO,CAACO,MAAR,CAAe,CAAf,CAAV;AACH,2BAvBS,CAwBV;AACA;;;AACAQ,0BAAAA,WAAW,GAAGf,OAAO,CAACO,MAAR,CAAe,CAAf,KAAqB,EAAnC;AACAvD,0BAAAA,SAAS,GAAGvC,OAAO,CAACsB,OAAR,CAAgBgF,WAAhB,EAA6B;AACrCM,4BAAAA,IAAI,EAAEL,OAD+B;AAErCvB,4BAAAA,IAAI,EAAEgB;AAF+B,2BAA7B,CAAZ;AAIAnG,0BAAAA,WAAW,CAACyB,OAAZ,CAAoB,CAChB,UAACS,EAAD;AAAA,mCAAQoE,IAAI,CAACkB,sBAAL,CAA4B9E,SAA5B,EAAuCR,EAAvC,CAAR;AAAA,2BADgB,CAApB,EAEGmE,GAFH;AAGH,yBAlCM,EAAP;AAmCH;;AACD,yBAAK,oBAAL;AAA2B;AACvB,+BAAQ,YAAM;AACV;AACA,8BAAMY,KAAK,GAAGvB,OAAO,CAACO,MAAR,CAAe,CAAf,CAAd;AACA,8BAAMiB,MAAM,GAAGxB,OAAO,CAACO,MAAR,CAAe,CAAf,CAAf,CAHU,CAIV;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,8BAAIkB,aAAa,CAACD,MAAD,CAAb,IAAyBE,gBAAgB,CAACH,KAAD,CAA7C,EAAsD;AAClD,gCAAII,OAAO,2DAAX;AACAA,4BAAAA,OAAO,mEAAP;AACAA,4BAAAA,OAAO,4CAAP;AACAA,4BAAAA,OAAO,uEAAP;AACAC,4BAAAA,OAAO,CAACC,IAAR,CAAaF,OAAb;AACAX,4BAAAA,OAAO,GAAGhB,OAAO,CAACO,MAAR,CAAe,CAAf,CAAV;AACAE,4BAAAA,OAAO,GAAGT,OAAO,CAACO,MAAR,CAAe,CAAf,CAAV;AACH,2BARD,MASK;AACDE,4BAAAA,OAAO,GAAGT,OAAO,CAACO,MAAR,CAAe,CAAf,CAAV;AACAS,4BAAAA,OAAO,GAAGhB,OAAO,CAACO,MAAR,CAAe,CAAf,CAAV;AACH,2BAvBS,CAwBV;AACA;;;AACAQ,0BAAAA,WAAW,GAAGf,OAAO,CAACO,MAAR,CAAe,CAAf,KAAqB,EAAnC;AACAvD,0BAAAA,SAAS,GAAGvC,OAAO,CAACsB,OAAR,CAAgBgF,WAAhB,EAA6B;AACrCM,4BAAAA,IAAI,EAAEL,OAD+B;AAErCvB,4BAAAA,IAAI,EAAEgB;AAF+B,2BAA7B,CAAZ;AAIAnG,0BAAAA,WAAW,CAACyB,OAAZ,CAAoB,CAChB,UAACS,EAAD;AAAA,mCAAQoE,IAAI,CAACmB,sBAAL,CAA4B/E,SAA5B,EAAuCR,EAAvC,CAAR;AAAA,2BADgB,EAEhB,UAACA,EAAD;AAAA,mCAAQoE,IAAI,CAACoB,qBAAL,CAA2BhF,SAA3B,EAAsCR,EAAtC,CAAR;AAAA,2BAFgB,CAApB,EAGGmE,GAHH;AAIH,yBAnCM,EAAP;AAoCH;;AACD,yBAAK,sBAAL;AAA6B;AACzB,wBAAA,MAAI,CAAC3E,SAAL,CAAeiG,sBAAf,GACKvI,IADL,CACU,UAAAF,MAAM;AAAA,iCAAImH,GAAG,CAAC,IAAD,EAAOnH,MAAP,CAAP;AAAA,yBADhB,EAEK2H,KAFL,CAEW,UAAA7D,GAAG;AAAA,iCAAIqD,GAAG,CAACrD,GAAD,CAAP;AAAA,yBAFd;;AAGA;AACH;;AACD,yBAAK,aAAL;AAAoB;AAChB,4BAAM4E,gBAAgB,GAAGlC,OAAO,CAACO,MAAR,CAAe,CAAf,CAAzB;;AACA,wBAAA,MAAI,CAACvE,SAAL,CAAemG,cAAf,GACKzI,IADL,CACU,UAAAF,MAAM;AAAA,iCAAImH,GAAG,CAAC,IAAD,EAAOnH,MAAP,CAAP;AAAA,yBADhB,EAEK2H,KAFL,CAEW,UAAA7D,GAAG;AAAA,iCAAIqD,GAAG,CAACrD,GAAD,CAAP;AAAA,yBAFd;;AAGA;AACH;;AACD,yBAAK,uBAAL;AAA8B;AAC1B,+BAAQ,YAAM;AACV0D,0BAAAA,OAAO,GAAGhB,OAAO,CAACO,MAAR,CAAe,CAAf,CAAV;AACAjG,0BAAAA,WAAW,CAACyB,OAAZ,CAAoB,CAChB,UAACS,EAAD;AAAA,mCAAQoE,IAAI,CAACwB,2BAAL,CAAiCpB,OAAjC,EAA0CxE,EAA1C,CAAR;AAAA,2BADgB,EAEhB,UAACA,EAAD;AAAA,mCAAQoE,IAAI,CAACyB,0BAAL,CAAgCrB,OAAhC,EAAyCxE,EAAzC,CAAR;AAAA,2BAFgB,CAApB,EAGGmE,GAHH;AAIH,yBANM,EAAP;AAOH;;AACD,yBAAK,oBAAL;AAA2B;AACvB,+BAAQ,YAAM;AACVF,0BAAAA,OAAO,GAAGT,OAAO,CAACO,MAAR,CAAe,CAAf,CAAV;AACA,8BAAIZ,SAAS,GAAGK,OAAO,CAACO,MAAR,CAAe,CAAf,CAAhB,CAFU,CAGV;AACA;;AACAQ,0BAAAA,WAAW,GAAGf,OAAO,CAACO,MAAR,CAAe,CAAf,KAAqB,EAAnC;AACAvD,0BAAAA,SAAS,GAAGvC,OAAO,CAACsB,OAAR,CAAgBgF,WAAhB,EAA6B;AACrCuB,4BAAAA,GAAG,EAAE3C,SADgC;AAErCF,4BAAAA,IAAI,EAAEgB;AAF+B,2BAA7B,CAAZ;AAIAG,0BAAAA,IAAI,CAAC2B,wBAAL,CAA8BvF,SAA9B,EAAyC2D,GAAzC;AACH,yBAXM,EAAP;AAYH;;AACD,yBAAK,mBAAL;AAA0B;AACtB;AACAF,wBAAAA,OAAO,GAAGT,OAAO,CAACO,MAAR,CAAe,CAAf,CAAV;AACAS,wBAAAA,OAAO,GAAGhB,OAAO,CAACO,MAAR,CAAe,CAAf,CAAV;AACAQ,wBAAAA,WAAW,GAAGf,OAAO,CAACO,MAAR,CAAe,CAAf,KAAqB,EAAnC;AACAvD,wBAAAA,SAAS,GAAGvC,OAAO,CAACsB,OAAR,CAAgBgF,WAAhB,EAA6B;AACrCM,0BAAAA,IAAI,EAAEL,OAD+B;AAErCvB,0BAAAA,IAAI,EAAEgB;AAF+B,yBAA7B,CAAZ;AAIAnG,wBAAAA,WAAW,CAACyB,OAAZ,CAAoB,CAChB,UAACS,EAAD;AAAA,iCAAQoE,IAAI,CAAC4B,mBAAL,CAAyBxF,SAAzB,EAAoCR,EAApC,CAAR;AAAA,yBADgB,CAApB,EAEGmE,GAFH;AAGA;AACH;;AACD,yBAAK,sBAAL;AAA6B;AACzB;AACAK,wBAAAA,OAAO,GAAGhB,OAAO,CAACO,MAAR,CAAe,CAAf,CAAV;AACAE,wBAAAA,OAAO,GAAGT,OAAO,CAACO,MAAR,CAAe,CAAf,CAAV;AACAQ,wBAAAA,WAAW,GAAGf,OAAO,CAACO,MAAR,CAAe,CAAf,KAAqB,EAAnC;AACAvD,wBAAAA,SAAS,GAAGvC,OAAO,CAACsB,OAAR,CAAgBgF,WAAhB,EAA6B;AACrCM,0BAAAA,IAAI,EAAEL,OAD+B;AAErCvB,0BAAAA,IAAI,EAAEgB;AAF+B,yBAA7B,CAAZ;AAIAnG,wBAAAA,WAAW,CAACyB,OAAZ,CAAoB,CAChB,UAACS,EAAD;AAAA,iCAAQoE,IAAI,CAAC4B,mBAAL,CAAyBxF,SAAzB,EAAoCR,EAApC,CAAR;AAAA,yBADgB,CAApB,EAEGmE,GAFH;AAGA;AACH;;AACD,yBAAK,wBAAL;AAA+B;AAC3B7D,wBAAAA,QAAQ,GAAGkD,OAAO,CAACO,MAAR,CAAe,CAAf,CAAX;AACAK,wBAAAA,IAAI,CAAC6B,qBAAL,CAA2B3F,QAA3B,EAAqC6D,GAArC;AACA;AACH;;AACD,yBAAK,iBAAL;AAAwB;AACpBK,wBAAAA,OAAO,GAAGhB,OAAO,CAACO,MAAR,CAAe,CAAf,CAAV;AACAE,wBAAAA,OAAO,GAAGT,OAAO,CAACO,MAAR,CAAe,CAAf,CAAV;AACAK,wBAAAA,IAAI,CAAC8B,cAAL,CAAoB1B,OAApB,EAA6BP,OAA7B,EAAsCE,GAAtC;AACA;AACH;;AACD,yBAAK,qBAAL;AAA4B;AACxB,+BAAQ,YAAM;AACV,8BAAMgC,SAAS,GAAG3C,OAAO,CAACO,MAAR,CAAe,CAAf,CAAlB;AACAK,0BAAAA,IAAI,CAACgC,kBAAL,CAAwBD,SAAxB,EAAmChC,GAAnC;AACH,yBAHM,EAAP;AAIH;;AACD,yBAAK,uBAAL;AAA8B;AAC1BC,wBAAAA,IAAI,CAACrE,WAAL,CAAiB,UAACe,GAAD,EAAM8D,QAAN,EAAmB;AAChC,8BAAI9D,GAAJ,EACI,OAAOqD,GAAG,CAACrD,GAAD,CAAV;AACJ,8BAAMuF,OAAO,GAAGzB,QAAQ,CAAC,CAAD,CAAR,IAAe,IAA/B;AACAT,0BAAAA,GAAG,CAAC,IAAD,EAAOkC,OAAP,CAAH;AACH,yBALD;AAMA;AACH;;AACD,yBAAK,qBAAL;AAA4B;AACxBjC,wBAAAA,IAAI,CAACrE,WAAL,CAAiB,UAACe,GAAD,EAAM8D,QAAN,EAAmB;AAChC,8BAAI9D,GAAJ,EACI,OAAOqD,GAAG,CAACrD,GAAD,CAAV;AACJqD,0BAAAA,GAAG,CAAC,IAAD,EAAOS,QAAP,CAAH;AACH,yBAJD;AAKA;AACH;;AACD;AAAS;AACL/H,wBAAAA,IAAI;AACJ;AACH;AAlOL;AAoOH,iBAtPD;;AAuPAiD,gBAAAA,iBAAiB,CAACwG,uBAAlB,GAA4C,UAAC9F,SAAD,EAAYR,EAAZ;AAAA,yBAAmB/D,SAAS,CAAC,MAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,wCAAuB;AAAA;AAAA;AAAA;AAAA;AAC3F,gCAAI+D,EAAJ,EAAQ;AACJA,8BAAAA,EAAE,CAAC,IAAD,EAAO,IAAP,CAAF;AACH;;AAH0F,+DAIpF,IAJoF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAvB,EAA5B;AAAA,iBAA5C;;AAMAF,gBAAAA,iBAAiB,CAACyG,eAAlB,GAAoC,UAAC/F,SAAD,EAAYR,EAAZ;AAAA,yBAAmB/D,SAAS,CAAC,MAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,wCAAuB;AAAA;AAAA;AAAA;AAAA;AACnF,gCAAI+D,EAAJ,EAAQ;AACJA,8BAAAA,EAAE,CAAC,IAAD,EAAO,IAAP,CAAF;AACH;;AAHkF,+DAI5E,IAJ4E;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAvB,EAA5B;AAAA,iBAApC;;AAMAF,gBAAAA,iBAAiB,CAAC0G,oBAAlB,GAAyC,UAAChG,SAAD,EAAYR,EAAZ;AAAA,yBAAmB/D,SAAS,CAAC,MAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,wCAAuB;AAAA;AAAA;AAAA;AAAA;AACxF,gCAAI+D,EAAJ,EAAQ;AACJA,8BAAAA,EAAE,CAAC,IAAD,EAAO,IAAP,CAAF;AACH;;AAHuF,+DAIjF,IAJiF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAvB,EAA5B;AAAA,iBAAzC;;AAMA,qBAAKyG,WAAL,CAAiB3G,iBAAjB;AACA,qBAAK4G,cAAL,GAAsB,IAAItI,KAAK,CAACmB,OAAV,CAAkB;AACpCoH,kBAAAA,MAAM,EAAE,KAAKhH;AADuB,iBAAlB,CAAtB;AAGA,qBAAK8G,WAAL,CAAiB,IAAIpI,eAAe,CAACkB,OAApB,EAAjB;AACA,qBAAKkH,WAAL,CAAiB,IAAInI,SAAS,CAACiB,OAAd,EAAjB;AACA,qBAAKkH,WAAL,CAAiB;AACbG,kBAAAA,SAAS,EAAE,mBAAAC,CAAC;AAAA,2BAAIA,CAAJ;AAAA,mBADC;AAEb3C,kBAAAA,aAAa,EAAE,uBAACV,OAAD,EAAU3G,IAAV,EAAgBsH,GAAhB;AAAA,2BAAwBlI,SAAS,CAAC,MAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,wCAAuB;AAAA;AAAA;AAAA;AAAA;AACnE,mCAAKyK,cAAL,CAAoBxC,aAApB,CAAkCV,OAAlC,EAA2C3G,IAA3C,EAAiDsH,GAAjD;;AADmE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAvB,EAAjC;AAAA;AAFF,iBAAjB,EA5kBmC,CAklBnC;;AACA,qBAAK2C,EAAL,CAAQ,OAAR,EAAiB,UAAChG,GAAD,EAAS;AACtBsE,kBAAAA,OAAO,CAACpB,KAAR,CAAclD,GAAG,CAACiG,KAAlB;AACH,iBAFD,EAnlBmC,CAslBnC;;AACA,qBAAKC,KAAL;;AACA,qBAAKC,aAAL,CAAmBC,kBAAnB;;AAxlBmC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAvB,EAAhB;AA0lBH;;;WACD,qBAAYlH,EAAZ,EAAgB;AACZ,aAAO/D,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,wCAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAClB,uBAAM,KAAKuD,SAAL,CAAeS,eAAf,EAAN;;AADkB;AAC7BC,gBAAAA,QAD6B;;AAAA,oBAE9BA,QAF8B;AAAA;AAAA;AAAA;;AAG/B,oBAAIF,EAAJ,EAAQ;AACJA,kBAAAA,EAAE,CAAC,IAAD,EAAO,EAAP,CAAF;AACH;;AAL8B,mDAMxB,EANwB;;AAAA;AAAA;AAQZ,uBAAM,KAAKR,SAAL,CAAeW,iBAAf,EAAN;;AARY;AAQ7BC,gBAAAA,cAR6B;;AAAA,oBAS9BA,cAT8B;AAAA;AAAA;AAAA;;AAU/B,oBAAIJ,EAAJ,EAAQ;AACJA,kBAAAA,EAAE,CAAC,IAAD,EAAO,EAAP,CAAF;AACH;;AAZ8B,mDAaxB,EAbwB;;AAAA;AAenC,oBAAIA,EAAJ,EAAQ;AACJA,kBAAAA,EAAE,CAAC,IAAD,EAAO,CAACI,cAAD,CAAP,CAAF;AACH;;AAjBkC,mDAkB5B,CAACA,cAAD,CAlB4B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAvB,EAAhB;AAoBH;;;WACD,uBAAc;AACV,aAAO,KAAKZ,SAAL,CAAe2H,mBAAf,EAAP;AACH;;;WACD,kBAAS;AACL,aAAOlL,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,wCAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACnC,uBAAM,KAAKuD,SAAL,CAAe4H,KAAf,EAAN;;AADmC;AAAA;AAEZ,uBAAM,KAAK5H,SAAL,CAAeW,iBAAf,EAAN;;AAFY;AAE7BC,gBAAAA,cAF6B;;AAAA,qBAG/BA,cAH+B;AAAA;AAAA;AAAA;;AAAA,mDAIxB,CAACA,cAAD,CAJwB;;AAAA;AAAA,mDAM5B,EAN4B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAvB,EAAhB;AAQH;;;WACD,mBAAU;AACN,aAAOnE,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,wCAAuB;AAAA;AAAA;AAAA;AAAA;AAAA,mDAC5B,KAAKuD,SAAL,CAAe6H,MAAf,EAD4B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAvB,EAAhB;AAGH;;;WACD,uBAAc;AACV,aAAO,IAAI5K,OAAJ,CAAY,UAACD,OAAD,EAAa;AAC5B,YAAI8K,QAAQ,CAACC,UAAT,KAAwB,SAA5B,EAAuC;AACnC/K,UAAAA,OAAO;AACV,SAFD,MAGK;AACD8K,UAAAA,QAAQ,CAACE,gBAAT,CAA0B,kBAA1B,EAA8C;AAAA,mBAAMhL,OAAO,EAAb;AAAA,WAA9C;AACH;AACJ,OAPM,CAAP;AAQH;;;WACD,yBAAgB4F,EAAhB,EAAoB;AAChB,aAAOnG,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,wCAAuB;AAAA;AAAA;AAAA;AAAA;AAAA,mDAC5B,KAAKwL,oBAAL,CAA0B,CAACrF,EAAD,CAA1B,CAD4B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAvB,EAAhB;AAGH;;;WACD,8BAAqBsF,GAArB,EAA0B;AACtB,aAAOzL,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,wCAAuB;AAAA;AAAA;AAAA;AAAA;AAAA,mDAC5B,KAAKuD,SAAL,CAAeiI,oBAAf,CAAoCC,GAApC,CAD4B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAvB,EAAhB;AAGH;;;WACD,0BAAiBA,GAAjB,EAAsB;AAClB,aAAOzL,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,wCAAuB;AAAA;AAAA;AAAA;AAAA;AAAA,mDAC5B,KAAKuD,SAAL,CAAemI,gBAAf,CAAgCD,GAAhC,CAD4B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAvB,EAAhB;AAGH;;;WACD,cAAKlH,SAAL,EAAgB;AACZ,aAAO,KAAKW,YAAL,CAAkBX,SAAlB,CAAP;AACH;;;WACD,iCAAwByD,OAAxB,EAAiC;AAC7B,aAAO,KAAKzE,SAAL,CAAeoI,uBAAf,CAAuC3D,OAAvC,CAAP;AACH;;;WACD,qCAAoC;AAAA;;AAChC,aAAO,wBAAKzE,SAAL,EAAeqI,yBAAf,kCAAP;AACH;;;WACD,sBAA2B;AAAA,UAAhBC,OAAgB,uEAAN,IAAM;AACvB,aAAO,KAAKtI,SAAL,CAAeuI,UAAf,CAA0BD,OAA1B,CAAP;AACH;;;WACD,yBAAgB;AACZ,aAAO,KAAKtI,SAAL,CAAewI,aAAf,EAAP;AACH;;;WACD,+BAAsBC,MAAtB,EAA8B;AAC1B,aAAO,KAAKzI,SAAL,CAAe0I,qBAAf,CAAqCD,MAArC,CAAP;AACH;;;WACD,mCAA0BA,MAA1B,EAAkC;AAC9B,aAAO,KAAKzI,SAAL,CAAe2I,yBAAf,CAAyCF,MAAzC,CAAP;AACH;;;WACD,4BAAmB7H,cAAnB,EAAmC;AAC/B,aAAO,KAAKZ,SAAL,CAAe4I,kBAAf,CAAkChI,cAAlC,CAAP;AACH;;;WACD,kCAAyB;AACrB,aAAO,KAAKZ,SAAL,CAAeiG,sBAAf,EAAP;AACH;;;WACD,wBAAexB,OAAf,EAAwB;AACpB,aAAO,KAAKzE,SAAL,CAAe6I,cAAf,CAA8BpE,OAA9B,CAAP;AACH;;;WACD,wBAAeyB,gBAAf,EAAiC;AAC7B,aAAO,KAAKlG,SAAL,CAAemG,cAAf,CAA8BD,gBAA9B,CAAP;AACH;;;;EAntB2BxH,sBAAsB,CAACqB,O;;AAqtBvD1B,OAAO,CAAC0B,OAAR,GAAkBZ,iBAAlB;;AACA,SAASuG,gBAAT,CAA0BoD,GAA1B,EAA+B;AAC3B,MAAMC,KAAK,GAAGvK,OAAO,CAACwK,YAAR,CAAqBF,GAArB,CAAd;AACA,MAAMG,OAAO,GAAGzK,OAAO,CAAC0K,cAAR,CAAuBH,KAAvB,CAAhB;AACA,SAAOE,OAAP;AACH,C,CACD;AACA;;;AACA,SAASxD,aAAT,CAAuBqD,GAAvB,EAA4B;AACxB,MAAMC,KAAK,GAAGvK,OAAO,CAACwK,YAAR,CAAqBF,GAArB,CAAd;AACA,MAAMI,cAAc,GAAG1K,OAAO,CAAC0K,cAAR,CAAuBH,KAAvB,CAAvB;AACA,SAAO,CAACG,cAAD,IAAmBC,UAAU,CAACL,GAAD,CAApC;AACH;;AACD,SAASK,UAAT,CAAoB1F,IAApB,EAA0B;AACtB,MAAM2F,QAAQ,GAAG,OAAO3F,IAAP,KAAgB,QAAjC;AACA,MAAI,CAAC2F,QAAL,EACI,OAAO,KAAP;AACJ,MAAMC,aAAa,GAAG5F,IAAI,CAAC6F,KAAL,CAAW,CAAX,EAAc,CAAd,MAAqB,IAA3C;AACA,MAAI,CAACD,aAAL,EACI,OAAO,KAAP;AACJ,MAAME,WAAW,GAAG9F,IAAI,CAAC6F,KAAL,CAAW,CAAX,CAApB;AACA,MAAME,QAAQ,GAAG,iBAAjB;AACA,MAAMP,OAAO,GAAGM,WAAW,CAACE,KAAZ,CAAkBD,QAAlB,CAAhB;AACA,SAAOP,OAAP;AACH","sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst waterfall_1 = __importDefault(require(\"async/waterfall\"));\nconst ethUtil = __importStar(require(\"ethereumjs-util\"));\nconst xtend_1 = __importDefault(require(\"xtend\"));\nconst web3_provider_engine_1 = __importDefault(require(\"web3-provider-engine\"));\nconst hooked_wallet_1 = __importDefault(require(\"web3-provider-engine/subproviders/hooked-wallet\"));\nconst rpc_1 = __importDefault(require(\"web3-provider-engine/subproviders/rpc\"));\nconst subscriptions_1 = __importDefault(require(\"web3-provider-engine/subproviders/subscriptions\"));\nconst filters_1 = __importDefault(require(\"web3-provider-engine/subproviders/filters\"));\nconst pify_1 = __importDefault(require(\"pify\"));\nconst web3Utils = __importStar(require(\"web3-utils\"));\nconst AuthereumSDK_1 = __importDefault(require(\"./AuthereumSDK\"));\nconst utils_1 = require(\"./utils\");\nclass AuthereumProvider extends web3_provider_engine_1.default {\n    constructor(config) {\n        super();\n        this.isAuthereum = true;\n        this.lastSignTx = '';\n        this.lastSignTxTimeout = null;\n        this.lastTx = '';\n        this.lastTxTimeout = null;\n        this.lastMsg = '';\n        this.lastMsgTimeout = null;\n        this.lastTypedMsg = '';\n        this.lastTypedMsgTimeout = null;\n        let authereumClient = null;\n        if (config instanceof AuthereumSDK_1.default) {\n            authereumClient = config;\n            config = authereumClient.config;\n        }\n        this.config = config || {};\n        this.authereum = authereumClient || new AuthereumSDK_1.default(this.config);\n        this.initSubprovider();\n        this.isAuthereum = true;\n    }\n    initSubprovider() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.authereum._tilReady();\n            this.rpcUri = this.config.rpcUri || (yield this.authereum.getRpcUri());\n            const throttleTimeout = 2e3;\n            const walletSubprovider = new hooked_wallet_1.default({\n                getAccounts: (cb) => __awaiter(this, void 0, void 0, function* () {\n                    const loggedIn = yield this.authereum.isAuthenticated();\n                    if (!loggedIn) {\n                        if (cb) {\n                            cb(null, []);\n                        }\n                        return [];\n                    }\n                    const accountAddress = yield this.authereum.getAccountAddress();\n                    if (!accountAddress) {\n                        if (cb) {\n                            cb(null, []);\n                        }\n                        return [];\n                    }\n                    if (cb) {\n                        cb(null, [accountAddress]);\n                    }\n                    return [accountAddress];\n                }),\n                approveTransaction: (txParams, cb) => __awaiter(this, void 0, void 0, function* () {\n                    if (cb) {\n                        cb(null, true);\n                    }\n                    return true;\n                }),\n                approveMessage: (msgParams, cb) => __awaiter(this, void 0, void 0, function* () {\n                    if (cb) {\n                        cb(null, true);\n                    }\n                    return true;\n                }),\n                approveTypedMessage: (msgParams, cb) => __awaiter(this, void 0, void 0, function* () {\n                    if (cb) {\n                        cb(null, true);\n                    }\n                    return true;\n                }),\n                signMessage: (msgParams, cb) => __awaiter(this, void 0, void 0, function* () {\n                    let currentMsg = msgParams;\n                    try {\n                        currentMsg = JSON.stringify(msgParams);\n                    }\n                    catch (err) {\n                        // noop\n                    }\n                    // Throttle if the tx is identical\n                    clearTimeout(this.lastMsgTimeout);\n                    if (this.lastMsg === currentMsg) {\n                        return this._throttledSignMessage(msgParams, cb);\n                    }\n                    // Check if this is the first one. If so, run it through the throttling function\n                    const isFirst = !this.lastMsg;\n                    this.lastMsg = currentMsg;\n                    this.lastMsgTimeout = setTimeout(() => {\n                        this.lastMsg = '';\n                    }, throttleTimeout);\n                    if (isFirst) {\n                        return this._throttledSignMessage(msgParams, cb);\n                    }\n                    return this._signMessage(msgParams, cb);\n                }),\n                signTransaction: (txParams, cb) => __awaiter(this, void 0, void 0, function* () {\n                    const t = Object.assign({}, txParams);\n                    t.nonce = null;\n                    // Throttle if the tx is identical\n                    const currentTx = JSON.stringify(t);\n                    clearTimeout(this.lastSignTxTimeout);\n                    if (this.lastSignTx === currentTx) {\n                        return this._throttledSignTransaction(txParams, cb);\n                    }\n                    // Check if this is the first one. If so, run it through the throttling function\n                    const isFirst = !this.lastSignTx;\n                    this.lastSignTx = currentTx;\n                    this.lastSignTxTimeout = setTimeout(() => {\n                        this.lastSignTx = '';\n                    }, throttleTimeout);\n                    if (isFirst) {\n                        return this._throttledSignTransaction(txParams, cb);\n                    }\n                    return this._signTransaction(txParams, cb);\n                }),\n                processSignTransaction: (txParams, cb) => __awaiter(this, void 0, void 0, function* () {\n                    const t = Object.assign({}, txParams);\n                    t.nonce = null;\n                    // Throttle if the tx is identical\n                    const currentTx = JSON.stringify(t);\n                    clearTimeout(this.lastTxTimeout);\n                    if (this.lastTx === currentTx) {\n                        return this._throttledProcessSignTransaction(txParams, cb);\n                    }\n                    // Check if this is the first one. If so, run it through the throttling function\n                    const isFirst = !this.lastTx;\n                    this.lastTx = currentTx;\n                    this.lastTxTimeout = setTimeout(() => {\n                        this.lastTx = '';\n                    }, throttleTimeout);\n                    if (isFirst) {\n                        return this._throttledProcessSignTransaction(txParams, cb);\n                    }\n                    return walletSubprovider.finalizeTx(txParams, cb);\n                }),\n                processTransaction: (txParams, cb) => __awaiter(this, void 0, void 0, function* () {\n                    const t = Object.assign({}, txParams);\n                    t.nonce = null;\n                    // Throttle if the tx is identical\n                    const currentTx = JSON.stringify(t);\n                    clearTimeout(this.lastTxTimeout);\n                    if (this.lastTx === currentTx) {\n                        return this._throttledProcessTransaction(txParams, cb);\n                    }\n                    // Check if this is the first one. If so, run it through the throttling function\n                    const isFirst = !this.lastTx;\n                    this.lastTx = currentTx;\n                    this.lastTxTimeout = setTimeout(() => {\n                        this.lastTx = '';\n                    }, throttleTimeout);\n                    if (isFirst) {\n                        return this._throttledProcessTransaction(txParams, cb);\n                    }\n                    return this._processTransaction(txParams, cb);\n                }),\n                finalizeTx: (txParams, cb) => __awaiter(this, void 0, void 0, function* () {\n                    try {\n                        const signedTx = yield this._signTransaction(txParams);\n                        const res = { raw: signedTx, tx: txParams };\n                        if (cb) {\n                            cb(null, res);\n                        }\n                        return res;\n                    }\n                    catch (err) {\n                        if (cb) {\n                            cb(err);\n                        }\n                        throw err;\n                    }\n                }),\n                approvePersonalMessage: (msgParams, cb) => __awaiter(this, void 0, void 0, function* () {\n                    if (cb) {\n                        cb(null, true);\n                    }\n                    return true;\n                }),\n                signPersonalMessage: (msgParams, cb) => __awaiter(this, void 0, void 0, function* () {\n                    msgParams.personal = true;\n                    return walletSubprovider.signMessage(msgParams, cb);\n                }),\n                signTypedMessage: (msgParams, cb) => __awaiter(this, void 0, void 0, function* () {\n                    let currentTypedMsg = msgParams;\n                    try {\n                        currentTypedMsg = JSON.stringify(msgParams);\n                    }\n                    catch (err) {\n                        // noop\n                    }\n                    // Throttle if the tx is identical\n                    clearTimeout(this.lastTypedMsgTimeout);\n                    if (this.lastTypedMsg === currentTypedMsg) {\n                        return this._throttledSignTypedMessage(msgParams, cb);\n                    }\n                    // Check if this is the first one. If so, run it through the throttling function\n                    const isFirst = !this.lastTypedMsg;\n                    this.lastTypedMsg = currentTypedMsg;\n                    this.lastTypedMsgTimeout = setTimeout(() => {\n                        this.lastTypedMsg = '';\n                    }, throttleTimeout);\n                    if (isFirst) {\n                        return this._throttledSignTypedMessage(msgParams, cb);\n                    }\n                    return this._signTypedMessage(msgParams, cb);\n                })\n            });\n            this.walletSubprovider = walletSubprovider;\n            this._processTransaction = (txParams, cb) => __awaiter(this, void 0, void 0, function* () {\n                try {\n                    const signedTransaction = yield pify_1.default(walletSubprovider.signTransaction.bind(walletSubprovider))(txParams);\n                    const transactionHash = web3Utils.sha3(signedTransaction);\n                    if (cb) {\n                        cb(null, transactionHash);\n                    }\n                    return transactionHash;\n                }\n                catch (err) {\n                    if (cb) {\n                        cb(err);\n                        return;\n                    }\n                    throw err;\n                }\n            });\n            this._throttledProcessSignTransaction = utils_1.throttle((txParams, cb) => __awaiter(this, void 0, void 0, function* () {\n                return walletSubprovider.finalizeTx(txParams, cb);\n            }), throttleTimeout);\n            this._throttledProcessTransaction = utils_1.throttle((txParams, cb) => __awaiter(this, void 0, void 0, function* () {\n                return this._processTransaction(txParams, cb);\n            }), throttleTimeout);\n            this._signMessage = (msgParams, cb) => __awaiter(this, void 0, void 0, function* () {\n                try {\n                    const signature = yield this.authereum.signMessage(msgParams.data, {\n                        personal: msgParams.personal,\n                        includeAuthSignature: true\n                    });\n                    if (cb) {\n                        cb(null, signature);\n                    }\n                    return signature;\n                }\n                catch (err) {\n                    if (cb) {\n                        cb(err);\n                    }\n                }\n            });\n            this._throttledSignMessage = utils_1.throttle((msgParams, cb) => __awaiter(this, void 0, void 0, function* () {\n                return this._signMessage(msgParams, cb);\n            }), throttleTimeout);\n            this._signTypedMessage = (msgParams, cb) => __awaiter(this, void 0, void 0, function* () {\n                try {\n                    const signature = yield this.authereum.signMessage(msgParams.data, {\n                        includeAuthSignature: true\n                    });\n                    if (cb) {\n                        cb(null, signature);\n                    }\n                    return signature;\n                }\n                catch (err) {\n                    if (cb) {\n                        cb(err);\n                    }\n                }\n            });\n            this._throttledSignTypedMessage = utils_1.throttle((msgParams, cb) => __awaiter(this, void 0, void 0, function* () {\n                return this._signTypedMessage(msgParams, cb);\n            }), throttleTimeout);\n            this._signTransaction = (txParams, cb) => __awaiter(this, void 0, void 0, function* () {\n                try {\n                    const res = yield this.authereum.signTransaction(txParams);\n                    if (!res) {\n                        throw new Error('Error signing transaction');\n                    }\n                    if (cb) {\n                        cb(null, res.signedTransactionData);\n                    }\n                    return res.signedTransactionData;\n                }\n                catch (err) {\n                    cb(err);\n                }\n            });\n            this._throttledSignTransaction = utils_1.throttle((txParams, cb) => __awaiter(this, void 0, void 0, function* () {\n                return this._signTransaction(txParams, cb);\n            }), throttleTimeout);\n            // keep reference to original sendAsync\n            this._sendAsync = this.sendAsync;\n            this.sendAsync = (payload, callback) => __awaiter(this, void 0, void 0, function* () {\n                return new Promise((resolve, reject) => {\n                    if (!callback) {\n                        callback = (err, response) => {\n                            if (err) {\n                                reject(err);\n                                return;\n                            }\n                            resolve(response);\n                        };\n                    }\n                    this._sendAsync(payload, callback);\n                });\n            });\n            this.send = (payload, callback) => {\n                // Web3 >=1.0-beta.38 calls `send` with method and parameters\n                if (typeof payload === 'string') {\n                    return new Promise((resolve, reject) => {\n                        this.sendAsync({\n                            jsonrpc: '2.0',\n                            id: 1,\n                            method: payload,\n                            params: callback || []\n                        }, (error, response) => {\n                            if (error) {\n                                reject(error);\n                            }\n                            else {\n                                resolve(response.result);\n                            }\n                        });\n                    });\n                }\n                // Web3 <=1.0 beta.37 uses `send` with a callback for async queries\n                if (callback) {\n                    this.sendAsync(payload, callback);\n                    return;\n                }\n                let result = null;\n                switch (payload.method) {\n                    case 'eth_uninstallFilter':\n                        this.sendAsync(payload, () => {\n                            // noop\n                        });\n                        result = true;\n                        break;\n                    default:\n                        let message = `The Authereum Web3 object does not support synchronous methods like ${payload.method} without a callback parameter.`;\n                        throw new Error(message);\n                }\n                return {\n                    id: payload.id,\n                    jsonrpc: payload.jsonrpc,\n                    result: result\n                };\n            };\n            walletSubprovider.handleRequest = (payload, next, end) => {\n                const self = walletSubprovider;\n                self._parityRequests = {};\n                self._parityRequestCount = 0;\n                // switch statement is not block scoped\n                // sp we cant repeat var declarations\n                let txParams;\n                let msgParams;\n                let extraParams;\n                let message;\n                let address;\n                const method = payload.method;\n                if (method && method.startsWith('stark_')) {\n                    this.authereum.getStarkProvider().send(method, payload.params)\n                        .then(result => end(null, result))\n                        .catch(err => end(err));\n                    return;\n                }\n                switch (method) {\n                    case 'eth_coinbase': {\n                        // process normally\n                        self.getAccounts((err, accounts) => {\n                            if (err)\n                                return end(err);\n                            let result = accounts[0] || null;\n                            end(null, result);\n                        });\n                        return;\n                    }\n                    case 'eth_accounts': {\n                        // process normally\n                        self.getAccounts((err, accounts) => {\n                            if (err)\n                                return end(err);\n                            end(null, accounts);\n                        });\n                        return;\n                    }\n                    case 'eth_sendTransaction': {\n                        txParams = payload.params[0];\n                        waterfall_1.default([\n                            (cb) => self.processTransaction(txParams, cb)\n                        ], end);\n                        return;\n                    }\n                    case 'eth_signTransaction': {\n                        txParams = payload.params[0];\n                        waterfall_1.default([\n                            (cb) => self.processSignTransaction(txParams, cb)\n                        ], end);\n                        return;\n                    }\n                    case 'eth_sign': {\n                        // process normally\n                        address = payload.params[0];\n                        message = payload.params[1];\n                        // non-standard \"extraParams\" to be appended to our \"msgParams\" obj\n                        // good place for metadata\n                        extraParams = payload.params[2] || {};\n                        msgParams = xtend_1.default(extraParams, {\n                            from: address,\n                            data: message\n                        });\n                        waterfall_1.default([\n                            (cb) => self.processMessage(msgParams, cb)\n                        ], end);\n                        return;\n                    }\n                    case 'personal_sign': {\n                        return (() => {\n                            // process normally\n                            const first = payload.params[0];\n                            const second = payload.params[1];\n                            // We initially incorrectly ordered these parameters.\n                            // To gracefully respect users who adopted this API early,\n                            // we are currently gracefully recovering from the wrong param order\n                            // when it is clearly identifiable.\n                            //\n                            // That means when the first param is definitely an address,\n                            // and the second param is definitely not, but is hex.\n                            if (resemblesData(second) && resemblesAddress(first)) {\n                                let warning = `The eth_personalSign method requires params ordered `;\n                                warning += `[message, address]. This was previously handled incorrectly, `;\n                                warning += `and has been corrected automatically. `;\n                                warning += `Please switch this param order for smooth behavior in the future.`;\n                                console.warn(warning);\n                                address = payload.params[0];\n                                message = payload.params[1];\n                            }\n                            else {\n                                message = payload.params[0];\n                                address = payload.params[1];\n                            }\n                            // non-standard \"extraParams\" to be appended to our \"msgParams\" obj\n                            // good place for metadata\n                            extraParams = payload.params[2] || {};\n                            msgParams = xtend_1.default(extraParams, {\n                                from: address,\n                                data: message\n                            });\n                            waterfall_1.default([\n                                (cb) => self.processPersonalMessage(msgParams, cb)\n                            ], end);\n                        })();\n                    }\n                    case 'eth_decryptMessage': {\n                        return (() => {\n                            // process normally\n                            const first = payload.params[0];\n                            const second = payload.params[1];\n                            // We initially incorrectly ordered these parameters.\n                            // To gracefully respect users who adopted this API early,\n                            // we are currently gracefully recovering from the wrong param order\n                            // when it is clearly identifiable.\n                            //\n                            // That means when the first param is definitely an address,\n                            // and the second param is definitely not, but is hex.\n                            if (resemblesData(second) && resemblesAddress(first)) {\n                                let warning = `The eth_decryptMessage method requires params ordered `;\n                                warning += `[message, address]. This was previously handled incorrectly, `;\n                                warning += `and has been corrected automatically. `;\n                                warning += `Please switch this param order for smooth behavior in the future.`;\n                                console.warn(warning);\n                                address = payload.params[0];\n                                message = payload.params[1];\n                            }\n                            else {\n                                message = payload.params[0];\n                                address = payload.params[1];\n                            }\n                            // non-standard \"extraParams\" to be appended to our \"msgParams\" obj\n                            // good place for metadata\n                            extraParams = payload.params[2] || {};\n                            msgParams = xtend_1.default(extraParams, {\n                                from: address,\n                                data: message\n                            });\n                            waterfall_1.default([\n                                (cb) => self.validateDecryptMessage(msgParams, cb),\n                                (cb) => self.processDecryptMessage(msgParams, cb)\n                            ], end);\n                        })();\n                    }\n                    case 'eth_getEncryptionKey': {\n                        this.authereum.getEncryptionPublicKey()\n                            .then(result => end(null, result))\n                            .catch(err => end(err));\n                        return;\n                    }\n                    case 'eth_decrypt': {\n                        const encryptedMessage = payload.params[0];\n                        this.authereum.decryptMessage()\n                            .then(result => end(null, result))\n                            .catch(err => end(err));\n                        return;\n                    }\n                    case 'encryption_public_key': {\n                        return (() => {\n                            address = payload.params[0];\n                            waterfall_1.default([\n                                (cb) => self.validateEncryptionPublicKey(address, cb),\n                                (cb) => self.processEncryptionPublicKey(address, cb)\n                            ], end);\n                        })();\n                    }\n                    case 'personal_ecRecover': {\n                        return (() => {\n                            message = payload.params[0];\n                            let signature = payload.params[1];\n                            // non-standard \"extraParams\" to be appended to our \"msgParams\" obj\n                            // good place for metadata\n                            extraParams = payload.params[2] || {};\n                            msgParams = xtend_1.default(extraParams, {\n                                sig: signature,\n                                data: message\n                            });\n                            self.recoverPersonalSignature(msgParams, end);\n                        })();\n                    }\n                    case 'eth_signTypedData': {\n                        // process normally\n                        message = payload.params[0];\n                        address = payload.params[1];\n                        extraParams = payload.params[2] || {};\n                        msgParams = xtend_1.default(extraParams, {\n                            from: address,\n                            data: message\n                        });\n                        waterfall_1.default([\n                            (cb) => self.processTypedMessage(msgParams, cb)\n                        ], end);\n                        return;\n                    }\n                    case 'eth_signTypedData_v3': {\n                        // process normally\n                        address = payload.params[0];\n                        message = payload.params[1];\n                        extraParams = payload.params[2] || {};\n                        msgParams = xtend_1.default(extraParams, {\n                            from: address,\n                            data: message\n                        });\n                        waterfall_1.default([\n                            (cb) => self.processTypedMessage(msgParams, cb)\n                        ], end);\n                        return;\n                    }\n                    case 'parity_postTransaction': {\n                        txParams = payload.params[0];\n                        self.parityPostTransaction(txParams, end);\n                        return;\n                    }\n                    case 'parity_postSign': {\n                        address = payload.params[0];\n                        message = payload.params[1];\n                        self.parityPostSign(address, message, end);\n                        return;\n                    }\n                    case 'parity_checkRequest': {\n                        return (() => {\n                            const requestId = payload.params[0];\n                            self.parityCheckRequest(requestId, end);\n                        })();\n                    }\n                    case 'parity_defaultAccount': {\n                        self.getAccounts((err, accounts) => {\n                            if (err)\n                                return end(err);\n                            const account = accounts[0] || null;\n                            end(null, account);\n                        });\n                        return;\n                    }\n                    case 'eth_requestAccounts': {\n                        self.getAccounts((err, accounts) => {\n                            if (err)\n                                return end(err);\n                            end(null, accounts);\n                        });\n                        return;\n                    }\n                    default: {\n                        next();\n                        return;\n                    }\n                }\n            };\n            walletSubprovider.validatePersonalMessage = (msgParams, cb) => __awaiter(this, void 0, void 0, function* () {\n                if (cb) {\n                    cb(null, true);\n                }\n                return true;\n            });\n            walletSubprovider.validateMessage = (msgParams, cb) => __awaiter(this, void 0, void 0, function* () {\n                if (cb) {\n                    cb(null, true);\n                }\n                return true;\n            });\n            walletSubprovider.validateTypedMessage = (msgParams, cb) => __awaiter(this, void 0, void 0, function* () {\n                if (cb) {\n                    cb(null, true);\n                }\n                return true;\n            });\n            this.addProvider(walletSubprovider);\n            this.rpcSubProvider = new rpc_1.default({\n                rpcUrl: this.rpcUri\n            });\n            this.addProvider(new subscriptions_1.default());\n            this.addProvider(new filters_1.default());\n            this.addProvider({\n                setEngine: _ => _,\n                handleRequest: (payload, next, end) => __awaiter(this, void 0, void 0, function* () {\n                    this.rpcSubProvider.handleRequest(payload, next, end);\n                })\n            });\n            // network connectivity error\n            this.on('error', (err) => {\n                console.error(err.stack);\n            });\n            // start polling\n            this.start();\n            this._blockTracker.removeAllListeners();\n        });\n    }\n    getAccounts(cb) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const loggedIn = yield this.authereum.isAuthenticated();\n            if (!loggedIn) {\n                if (cb) {\n                    cb(null, []);\n                }\n                return [];\n            }\n            const accountAddress = yield this.authereum.getAccountAddress();\n            if (!accountAddress) {\n                if (cb) {\n                    cb(null, []);\n                }\n                return [];\n            }\n            if (cb) {\n                cb(null, [accountAddress]);\n            }\n            return [accountAddress];\n        });\n    }\n    isConnected() {\n        return this.authereum.isAuthenticatedSync();\n    }\n    enable() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.authereum.login();\n            const accountAddress = yield this.authereum.getAccountAddress();\n            if (accountAddress) {\n                return [accountAddress];\n            }\n            return [];\n        });\n    }\n    disable() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.authereum.logout();\n        });\n    }\n    tilDomReady() {\n        return new Promise((resolve) => {\n            if (document.readyState !== 'loading') {\n                resolve();\n            }\n            else {\n                document.addEventListener('DOMContentLoaded', () => resolve());\n            }\n        });\n    }\n    sendTransaction(tx) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.sendTransactionBatch([tx]);\n        });\n    }\n    sendTransactionBatch(txs) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.authereum.sendTransactionBatch(txs);\n        });\n    }\n    estimateGasBatch(txs) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.authereum.estimateGasBatch(txs);\n        });\n    }\n    sign(msgParams) {\n        return this._signMessage(msgParams);\n    }\n    signMessageWithAdminKey(message) {\n        return this.authereum.signMessageWithAdminKey(message);\n    }\n    signMessageWithSigningKey(...input) {\n        return this.authereum.signMessageWithSigningKey(...input);\n    }\n    showWidget(enabled = true) {\n        return this.authereum.showWidget(enabled);\n    }\n    widgetEnabled() {\n        return this.authereum.widgetEnabled();\n    }\n    getTransactionReceipt(txHash) {\n        return this.authereum.getTransactionReceipt(txHash);\n    }\n    waitForTransactionReceipt(txHash) {\n        return this.authereum.waitForTransactionReceipt(txHash);\n    }\n    isContractDeployed(accountAddress) {\n        return this.authereum.isContractDeployed(accountAddress);\n    }\n    getEncryptionPublicKey() {\n        return this.authereum.getEncryptionPublicKey();\n    }\n    encryptMessage(message) {\n        return this.authereum.encryptMessage(message);\n    }\n    decryptMessage(encryptedMessage) {\n        return this.authereum.decryptMessage(encryptedMessage);\n    }\n}\nexports.default = AuthereumProvider;\nfunction resemblesAddress(str) {\n    const fixed = ethUtil.addHexPrefix(str);\n    const isValid = ethUtil.isValidAddress(fixed);\n    return isValid;\n}\n// Returns true if resembles hex data\n// but definitely not a valid address.\nfunction resemblesData(str) {\n    const fixed = ethUtil.addHexPrefix(str);\n    const isValidAddress = ethUtil.isValidAddress(fixed);\n    return !isValidAddress && isValidHex(str);\n}\nfunction isValidHex(data) {\n    const isString = typeof data === 'string';\n    if (!isString)\n        return false;\n    const isHexPrefixed = data.slice(0, 2) === '0x';\n    if (!isHexPrefixed)\n        return false;\n    const nonPrefixed = data.slice(2);\n    const hexRegex = /^[0-9A-Fa-f]+$/g;\n    const isValid = nonPrefixed.match(hexRegex);\n    return isValid;\n}\n"]},"metadata":{},"sourceType":"script"}