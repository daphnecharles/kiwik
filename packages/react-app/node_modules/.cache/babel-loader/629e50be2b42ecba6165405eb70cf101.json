{"ast":null,"code":"import _regeneratorRuntime from \"/Users/sam/Desktop/kiwik/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/sam/Desktop/kiwik/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/sam/Desktop/kiwik/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/Users/sam/Desktop/kiwik/packages/react-app/src/components/AddressInput.jsx\",\n    _s = $RefreshSig$();\n\nimport { Badge, Input } from \"antd\";\nimport React, { useCallback, useState } from \"react\";\nimport { ethers } from \"ethers\";\nimport { CameraOutlined, QrcodeOutlined } from \"@ant-design/icons\";\nimport { useLookupAddress } from \"eth-hooks/dapps/ens\";\nimport QrReader from \"react-qr-reader\";\nimport Blockie from \"./Blockie\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar isENS = function isENS() {\n  var address = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n  return address.endsWith(\".eth\") || address.endsWith(\".xyz\");\n}; // probably we need to change value={toAddress} to address={toAddress}\n\n/** \n  ~ What it does? ~\n\n  Displays an address input with QR scan option\n\n  ~ How can I use? ~\n\n  <AddressInput\n    autoFocus\n    ensProvider={mainnetProvider}\n    placeholder=\"Enter address\"\n    value={toAddress}\n    onChange={setToAddress}\n  />\n\n  ~ Features ~\n\n  - Provide ensProvider={mainnetProvider} and your address will be replaced by ENS name\n              (ex. \"0xa870\" => \"user.eth\") or you can enter directly ENS name instead of address\n  - Provide placeholder=\"Enter address\" value for the input\n  - Value of the address input is stored in value={toAddress}\n  - Control input change by onChange={setToAddress}\n                          or onChange={address => { setToAddress(address);}}\n**/\n\n\nexport default function AddressInput(props) {\n  _s();\n\n  var ensProvider = props.ensProvider,\n      onChange = props.onChange;\n\n  var _useState = useState(props.value),\n      _useState2 = _slicedToArray(_useState, 2),\n      value = _useState2[0],\n      setValue = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      scan = _useState4[0],\n      setScan = _useState4[1];\n\n  var currentValue = typeof props.value !== \"undefined\" ? props.value : value;\n  var ens = useLookupAddress(props.ensProvider, currentValue);\n  var updateAddress = useCallback( /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(newValue) {\n      var address, possibleAddress;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(typeof newValue !== \"undefined\")) {\n                _context.next = 14;\n                break;\n              }\n\n              address = newValue;\n\n              if (!isENS(address)) {\n                _context.next = 12;\n                break;\n              }\n\n              _context.prev = 3;\n              _context.next = 6;\n              return ensProvider.resolveName(address);\n\n            case 6:\n              possibleAddress = _context.sent;\n\n              if (possibleAddress) {\n                address = possibleAddress;\n              } // eslint-disable-next-line no-empty\n\n\n              _context.next = 12;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](3);\n\n            case 12:\n              setValue(address);\n\n              if (typeof onChange === \"function\") {\n                onChange(address);\n              }\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[3, 10]]);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }(), [ensProvider, onChange]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [scan ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        zIndex: 256,\n        position: \"absolute\",\n        left: 0,\n        top: 0,\n        width: \"100%\"\n      },\n      onClick: function onClick() {\n        setScan(false);\n      },\n      children: /*#__PURE__*/_jsxDEV(QrReader, {\n        delay: 250,\n        resolution: 1200,\n        onError: function onError(e) {\n          console.log(\"SCAN ERROR\", e);\n          setScan(false);\n        },\n        onScan: function onScan(newValue) {\n          if (newValue) {\n            console.log(\"SCAN VALUE\", newValue);\n            var possibleNewValue = newValue;\n\n            if (possibleNewValue.indexOf(\"/\") >= 0) {\n              possibleNewValue = possibleNewValue.substr(possibleNewValue.lastIndexOf(\"0x\"));\n              console.log(\"CLEANED VALUE\", possibleNewValue);\n            }\n\n            setScan(false);\n            updateAddress(possibleNewValue);\n          }\n        },\n        style: {\n          width: \"100%\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }, this) : \"\", /*#__PURE__*/_jsxDEV(Input, {\n      id: \"0xAddress\" // name it something other than address for auto fill doxxing\n      ,\n      name: \"0xAddress\" // name it something other than address for auto fill doxxing\n      ,\n      autoComplete: \"off\",\n      autoFocus: props.autoFocus,\n      placeholder: props.placeholder ? props.placeholder : \"address\",\n      prefix: /*#__PURE__*/_jsxDEV(Blockie, {\n        address: currentValue,\n        size: 8,\n        scale: 3\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }, this),\n      value: ethers.utils.isAddress(currentValue) && !isENS(currentValue) && isENS(ens) ? ens : currentValue,\n      addonAfter: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 4,\n          cursor: \"pointer\"\n        },\n        onClick: function onClick() {\n          setScan(!scan);\n        },\n        children: [/*#__PURE__*/_jsxDEV(Badge, {\n          count: /*#__PURE__*/_jsxDEV(CameraOutlined, {\n            style: {\n              fontSize: 9\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 27\n          }, this),\n          children: /*#__PURE__*/_jsxDEV(QrcodeOutlined, {\n            style: {\n              fontSize: 18\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 13\n        }, this), \" \", \"Scan\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }, this),\n      onChange: function onChange(e) {\n        updateAddress(e.target.value);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n}\n\n_s(AddressInput, \"+Y1/HWX+XHKssCkvQS70MSIqFjc=\", false, function () {\n  return [useLookupAddress];\n});\n\n_c = AddressInput;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddressInput\");","map":{"version":3,"sources":["/Users/sam/Desktop/kiwik/packages/react-app/src/components/AddressInput.jsx"],"names":["Badge","Input","React","useCallback","useState","ethers","CameraOutlined","QrcodeOutlined","useLookupAddress","QrReader","Blockie","isENS","address","endsWith","AddressInput","props","ensProvider","onChange","value","setValue","scan","setScan","currentValue","ens","updateAddress","newValue","resolveName","possibleAddress","zIndex","position","left","top","width","e","console","log","possibleNewValue","indexOf","substr","lastIndexOf","autoFocus","placeholder","utils","isAddress","marginTop","cursor","fontSize","target"],"mappings":"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","sourcesContent":["import { Badge, Input } from \"antd\";\nimport React, { useCallback, useState } from \"react\";\nimport { ethers } from \"ethers\";\nimport { CameraOutlined, QrcodeOutlined } from \"@ant-design/icons\";\nimport { useLookupAddress } from \"eth-hooks/dapps/ens\";\nimport QrReader from \"react-qr-reader\";\n\nimport Blockie from \"./Blockie\";\n\nconst isENS = (address = \"\") => address.endsWith(\".eth\") || address.endsWith(\".xyz\");\n\n// probably we need to change value={toAddress} to address={toAddress}\n\n/** \n  ~ What it does? ~\n\n  Displays an address input with QR scan option\n\n  ~ How can I use? ~\n\n  <AddressInput\n    autoFocus\n    ensProvider={mainnetProvider}\n    placeholder=\"Enter address\"\n    value={toAddress}\n    onChange={setToAddress}\n  />\n\n  ~ Features ~\n\n  - Provide ensProvider={mainnetProvider} and your address will be replaced by ENS name\n              (ex. \"0xa870\" => \"user.eth\") or you can enter directly ENS name instead of address\n  - Provide placeholder=\"Enter address\" value for the input\n  - Value of the address input is stored in value={toAddress}\n  - Control input change by onChange={setToAddress}\n                          or onChange={address => { setToAddress(address);}}\n**/\nexport default function AddressInput(props) {\n  const { ensProvider, onChange } = props;\n  const [value, setValue] = useState(props.value);\n  const [scan, setScan] = useState(false);\n\n  const currentValue = typeof props.value !== \"undefined\" ? props.value : value;\n  const ens = useLookupAddress(props.ensProvider, currentValue);\n\n  const updateAddress = useCallback(\n    async newValue => {\n      if (typeof newValue !== \"undefined\") {\n        let address = newValue;\n        if (isENS(address)) {\n          try {\n            const possibleAddress = await ensProvider.resolveName(address);\n            if (possibleAddress) {\n              address = possibleAddress;\n            }\n            // eslint-disable-next-line no-empty\n          } catch (e) {}\n        }\n        setValue(address);\n        if (typeof onChange === \"function\") {\n          onChange(address);\n        }\n      }\n    },\n    [ensProvider, onChange],\n  );\n\n  return (\n    <div>\n      {scan ? (\n        <div\n          style={{\n            zIndex: 256,\n            position: \"absolute\",\n            left: 0,\n            top: 0,\n            width: \"100%\",\n          }}\n          onClick={() => {\n            setScan(false);\n          }}\n        >\n          <QrReader\n            delay={250}\n            resolution={1200}\n            onError={e => {\n              console.log(\"SCAN ERROR\", e);\n              setScan(false);\n            }}\n            onScan={newValue => {\n              if (newValue) {\n                console.log(\"SCAN VALUE\", newValue);\n                let possibleNewValue = newValue;\n                if (possibleNewValue.indexOf(\"/\") >= 0) {\n                  possibleNewValue = possibleNewValue.substr(possibleNewValue.lastIndexOf(\"0x\"));\n                  console.log(\"CLEANED VALUE\", possibleNewValue);\n                }\n                setScan(false);\n                updateAddress(possibleNewValue);\n              }\n            }}\n            style={{ width: \"100%\" }}\n          />\n        </div>\n      ) : (\n        \"\"\n      )}\n      <Input\n        id=\"0xAddress\" // name it something other than address for auto fill doxxing\n        name=\"0xAddress\" // name it something other than address for auto fill doxxing\n        autoComplete=\"off\"\n        autoFocus={props.autoFocus}\n        placeholder={props.placeholder ? props.placeholder : \"address\"}\n        prefix={<Blockie address={currentValue} size={8} scale={3} />}\n        value={ethers.utils.isAddress(currentValue) && !isENS(currentValue) && isENS(ens) ? ens : currentValue}\n        addonAfter={\n          <div\n            style={{ marginTop: 4, cursor: \"pointer\" }}\n            onClick={() => {\n              setScan(!scan);\n            }}\n          >\n            <Badge count={<CameraOutlined style={{ fontSize: 9 }} />}>\n              <QrcodeOutlined style={{ fontSize: 18 }} />\n            </Badge>{\" \"}\n            Scan\n          </div>\n        }\n        onChange={e => {\n          updateAddress(e.target.value);\n        }}\n      />\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}