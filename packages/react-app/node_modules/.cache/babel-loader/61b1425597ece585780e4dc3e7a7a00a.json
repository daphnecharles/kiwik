{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport React from 'react';\n\nvar ToolbarMenu = function (_super) {\n  __extends(ToolbarMenu, _super);\n\n  function ToolbarMenu(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this._node = null;\n    _this._listener = null;\n\n    _this.handleOpen = function (e) {\n      preventDefault(e);\n\n      _this.setState({\n        visible: true\n      });\n\n      _this._subscribe();\n    };\n\n    _this.state = {\n      visible: false\n    };\n    return _this;\n  }\n\n  ToolbarMenu.prototype.componentWillUnmount = function () {\n    this._release();\n  };\n\n  ToolbarMenu.prototype.render = function () {\n    var _this = this;\n\n    var visible = this.state.visible;\n    return React.createElement(\"a\", {\n      className: \"toolbar-menu toolbar-button\",\n      onClick: this.handleOpen.bind(this),\n      onMouseDown: preventDefault,\n      ref: function ref(node) {\n        if (node) {\n          _this._node = node;\n        }\n      },\n      title: this.props.title\n    }, this.props.label, React.createElement(\"svg\", {\n      width: \"14\",\n      height: \"8\"\n    }, React.createElement(\"path\", {\n      fill: \"#666\",\n      d: \"M 5 1.5 L 14 1.5 L 9.5 7 z\"\n    })), React.createElement(\"ul\", {\n      className: 'toolbar-menu-items' + (visible ? ' open' : '')\n    }, this.props.children));\n  };\n\n  ToolbarMenu.prototype._subscribe = function () {\n    if (!this._listener) {\n      this._listener = this.handleClick.bind(this);\n      document.addEventListener('click', this._listener);\n    }\n  };\n\n  ToolbarMenu.prototype._release = function () {\n    if (this._listener) {\n      document.removeEventListener('click', this._listener);\n      this._listener = null;\n    }\n  };\n\n  ToolbarMenu.prototype.handleClick = function (e) {\n    if (this._node !== e.target) {\n      e.preventDefault();\n      this.setState({\n        visible: false\n      });\n\n      this._release();\n    }\n  };\n\n  return ToolbarMenu;\n}(React.Component);\n\nexport { ToolbarMenu };\nexport var ToolbarMenuItem = function ToolbarMenuItem(_a) {\n  var onSelect = _a.onSelect,\n      title = _a.title,\n      label = _a.label;\n  return React.createElement(\"li\", {\n    onMouseOver: function onMouseOver(e) {\n      e.currentTarget.className = 'hover';\n    },\n    onMouseOut: function onMouseOut(e) {\n      e.currentTarget.className = '';\n    },\n    onMouseDown: preventDefault,\n    onMouseUp: onSelect,\n    title: title\n  }, label);\n};\n\nfunction preventDefault(e) {\n  e.preventDefault();\n}","map":{"version":3,"sources":["../../src/components/ToolbarMenu.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport React from 'react';\nvar ToolbarMenu = (function (_super) {\n    __extends(ToolbarMenu, _super);\n    function ToolbarMenu(props) {\n        var _this = _super.call(this, props) || this;\n        _this._node = null;\n        _this._listener = null;\n        _this.handleOpen = function (e) {\n            preventDefault(e);\n            _this.setState({ visible: true });\n            _this._subscribe();\n        };\n        _this.state = { visible: false };\n        return _this;\n    }\n    ToolbarMenu.prototype.componentWillUnmount = function () {\n        this._release();\n    };\n    ToolbarMenu.prototype.render = function () {\n        var _this = this;\n        var visible = this.state.visible;\n        return (React.createElement(\"a\", { className: \"toolbar-menu toolbar-button\", onClick: this.handleOpen.bind(this), onMouseDown: preventDefault, ref: function (node) {\n                if (node) {\n                    _this._node = node;\n                }\n            }, title: this.props.title },\n            this.props.label,\n            React.createElement(\"svg\", { width: \"14\", height: \"8\" },\n                React.createElement(\"path\", { fill: \"#666\", d: \"M 5 1.5 L 14 1.5 L 9.5 7 z\" })),\n            React.createElement(\"ul\", { className: 'toolbar-menu-items' + (visible ? ' open' : '') }, this.props.children)));\n    };\n    ToolbarMenu.prototype._subscribe = function () {\n        if (!this._listener) {\n            this._listener = this.handleClick.bind(this);\n            document.addEventListener('click', this._listener);\n        }\n    };\n    ToolbarMenu.prototype._release = function () {\n        if (this._listener) {\n            document.removeEventListener('click', this._listener);\n            this._listener = null;\n        }\n    };\n    ToolbarMenu.prototype.handleClick = function (e) {\n        if (this._node !== e.target) {\n            e.preventDefault();\n            this.setState({ visible: false });\n            this._release();\n        }\n    };\n    return ToolbarMenu;\n}(React.Component));\nexport { ToolbarMenu };\nexport var ToolbarMenuItem = function (_a) {\n    var onSelect = _a.onSelect, title = _a.title, label = _a.label;\n    return (React.createElement(\"li\", { onMouseOver: function (e) {\n            e.currentTarget.className = 'hover';\n        }, onMouseOut: function (e) {\n            e.currentTarget.className = '';\n        }, onMouseDown: preventDefault, onMouseUp: onSelect, title: title }, label));\n};\nfunction preventDefault(e) {\n    e.preventDefault();\n}\n//# sourceMappingURL=ToolbarMenu.js.map"]},"metadata":{},"sourceType":"module"}