{"ast":null,"code":"import { parse, typeFromAST, visit } from 'graphql';\nexport default function getOperationFacts(schema, documentStr) {\n  if (!documentStr) {\n    return;\n  }\n\n  var documentAST;\n\n  try {\n    documentAST = parse(documentStr, {\n      experimentalFragmentVariables: true\n    });\n  } catch (_a) {\n    return;\n  }\n\n  var variableToType = schema ? collectVariables(schema, documentAST) : undefined;\n  var operations = [];\n  visit(documentAST, {\n    OperationDefinition: function OperationDefinition(node) {\n      operations.push(node);\n    }\n  });\n  return {\n    variableToType: variableToType,\n    operations: operations,\n    documentAST: documentAST\n  };\n}\nexport var getQueryFacts = getOperationFacts;\nexport function collectVariables(schema, documentAST) {\n  var variableToType = Object.create(null);\n  documentAST.definitions.forEach(function (definition) {\n    if (definition.kind === 'OperationDefinition') {\n      var variableDefinitions = definition.variableDefinitions;\n\n      if (variableDefinitions) {\n        variableDefinitions.forEach(function (_a) {\n          var variable = _a.variable,\n              type = _a.type;\n          var inputType = typeFromAST(schema, type);\n\n          if (inputType) {\n            variableToType[variable.name.value] = inputType;\n          }\n        });\n      }\n    }\n  });\n  return variableToType;\n}","map":{"version":3,"sources":["../../src/utility/getQueryFacts.ts"],"names":[],"mappings":"AAOA,SACE,KADF,EAEE,WAFF,EAQE,KARF,QASO,SATP;AA2BA,eAAc,SAAU,iBAAV,CACZ,MADY,EAEZ,WAFY,EAEe;AAE3B,MAAI,CAAC,WAAL,EAAkB;AAChB;AACD;;AAED,MAAI,WAAJ;;AACA,MAAI;AACF,IAAA,WAAW,GAAG,KAAK,CAAC,WAAD,EAAc;AAC/B,MAAA,6BAA6B,EAAE;AADA,KAAd,CAAnB;AAGD,GAJD,CAIE,OAAA,EAAA,EAAM;AACN;AACD;;AAED,MAAM,cAAc,GAAG,MAAM,GACzB,gBAAgB,CAAC,MAAD,EAAS,WAAT,CADS,GAEzB,SAFJ;AAKA,MAAM,UAAU,GAA8B,EAA9C;AAEA,EAAA,KAAK,CAAC,WAAD,EAAc;AACjB,IAAA,mBAAmB,EAAA,6BAAC,IAAD,EAAK;AACtB,MAAA,UAAU,CAAC,IAAX,CAAgB,IAAhB;AACD;AAHgB,GAAd,CAAL;AAMA,SAAO;AAAE,IAAA,cAAc,EAAA,cAAhB;AAAkB,IAAA,UAAU,EAAA,UAA5B;AAA8B,IAAA,WAAW,EAAA;AAAzC,GAAP;AACD;AAKD,OAAO,IAAM,aAAa,GAAG,iBAAtB;AAKP,OAAM,SAAU,gBAAV,CACJ,MADI,EAEJ,WAFI,EAEqB;AAEzB,MAAM,cAAc,GAEhB,MAAM,CAAC,MAAP,CAAc,IAAd,CAFJ;AAGA,EAAA,WAAW,CAAC,WAAZ,CAAwB,OAAxB,CAAgC,UAAA,UAAA,EAAU;AACxC,QAAI,UAAU,CAAC,IAAX,KAAoB,qBAAxB,EAA+C;AAC7C,UAAM,mBAAmB,GAAG,UAAU,CAAC,mBAAvC;;AACA,UAAI,mBAAJ,EAAyB;AACvB,QAAA,mBAAmB,CAAC,OAApB,CAA4B,UAAC,EAAD,EAAmB;cAAhB,QAAQ,GAAA,EAAA,CAAA,Q;cAAE,IAAI,GAAA,EAAA,CAAA,I;AAC3C,cAAM,SAAS,GAAG,WAAW,CAAC,MAAD,EAAS,IAAT,CAA7B;;AACA,cAAI,SAAJ,EAAe;AACb,YAAA,cAAc,CAAC,QAAQ,CAAC,IAAT,CAAc,KAAf,CAAd,GAAsC,SAAtC;AACD;AACF,SALD;AAMD;AACF;AACF,GAZD;AAaA,SAAO,cAAP;AACD","sourceRoot":"","sourcesContent":["import { parse, typeFromAST, visit, } from 'graphql';\nexport default function getOperationFacts(schema, documentStr) {\n    if (!documentStr) {\n        return;\n    }\n    var documentAST;\n    try {\n        documentAST = parse(documentStr, {\n            experimentalFragmentVariables: true,\n        });\n    }\n    catch (_a) {\n        return;\n    }\n    var variableToType = schema\n        ? collectVariables(schema, documentAST)\n        : undefined;\n    var operations = [];\n    visit(documentAST, {\n        OperationDefinition: function (node) {\n            operations.push(node);\n        },\n    });\n    return { variableToType: variableToType, operations: operations, documentAST: documentAST };\n}\nexport var getQueryFacts = getOperationFacts;\nexport function collectVariables(schema, documentAST) {\n    var variableToType = Object.create(null);\n    documentAST.definitions.forEach(function (definition) {\n        if (definition.kind === 'OperationDefinition') {\n            var variableDefinitions = definition.variableDefinitions;\n            if (variableDefinitions) {\n                variableDefinitions.forEach(function (_a) {\n                    var variable = _a.variable, type = _a.type;\n                    var inputType = typeFromAST(schema, type);\n                    if (inputType) {\n                        variableToType[variable.name.value] = inputType;\n                    }\n                });\n            }\n        }\n    });\n    return variableToType;\n}\n//# sourceMappingURL=getQueryFacts.js.map"]},"metadata":{},"sourceType":"module"}